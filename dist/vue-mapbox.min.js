!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["vue-mapbox"]=e():t["vue-mapbox"]=e()}(this,function(){return function(t){function e(r){if(o[r])return o[r].exports;var i=o[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var o={};return e.m=t,e.c=o,e.i=function(t){return t},e.d=function(t,o,r){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=21)}([function(t,e){t.exports=function(t,e,o,r,i){var n,a=t=t||{},s=typeof t.default;"object"!==s&&"function"!==s||(n=t,a=t.default);var u="function"==typeof a?a.options:a;e&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns),r&&(u._scopeId=r);var c;if(i?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},u._ssrRegister=c):o&&(c=o),c){var d=u.functional,l=d?u.render:u.beforeCreate;d?u.render=function(t,e){return c.call(e),l(t,e)}:u.beforeCreate=l?[].concat(l,c):[c]}return{esModule:n,exports:a,options:u}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t};e.default={created:function(){this.map=null},mounted:function(){this.$_checkMapTree()},methods:{$_findBaseMap:function(){function t(o){o.baseMap?e=o:void 0!==o.$parent&&t(o.$parent)}var e=null;if(t(this.$parent),void 0===e)throw new Error("Component must have root map");return e},$_checkMapTree:function(){var t=this.$_findBaseMap();t&&(t.mapLoaded?this.$_deferredMount({component:t,map:t.map}):t.$on("load",this.$_deferredMount))},$_emitMapEvent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$emit(t,r({map:this.map,component:this},e))}}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={beforeDestroy:function(){void 0!==this.map&&this.map.removeControl(this.control)}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},i=o(1),n=function(t){return t&&t.__esModule?t:{default:t}}(i),a={sourceId:{type:String}},s={layerId:{type:String,required:!0},metadata:Object,refLayer:String,"source-layer":String,minZoom:Number,maxZoom:Number,paint:Object,layout:Object,before:Object},u={clearSource:{type:Boolean,default:!0},replaceSource:{type:Boolean,default:!1},replace:{type:Boolean,default:!1}};e.default={mixins:[n.default],props:r({},a,s,u),data:function(){return{initial:!0}},computed:{sourceLoaded:function(){return this.map.isSourceLoaded(this.sourceId)},mapLayer:function(){return this.map.getLayer(this.layerId)}},watch:{minzoom:function(t){this.initial||this.map.setLayerZoomRange(this.layerId,t,this.maxzoom)},maxzoom:function(t){this.initial||this.map.setLayerZoomRange(this.layerId,this.minzoom,t)},paint:function(t){if(!this.initial){var e=!0,o=!1,r=void 0;try{for(var i,n=Object.keys(this.paint)[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var a=i.value;this.paint[a]!==t[a]&&(this.map.setPaintProperty(this.layerId,a,t[a]),this.paint[a]=t[a])}}catch(t){o=!0,r=t}finally{try{!e&&n.return&&n.return()}finally{if(o)throw r}}}},layout:function(t){if(!this.initial){var e=!0,o=!1,r=void 0;try{for(var i,n=Object.keys(this.layout)[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var a=i.value;this.layout[a]!==t[a]&&(this.map.setLayoutProperty(this.layerId,a,t[a]),this.layout[a]=t[a])}}catch(t){o=!0,r=t}finally{try{!e&&n.return&&n.return()}finally{if(o)throw r}}}}},beforeDestroy:function(){if(this.map){try{this.map.removeLayer(this.layerId)}catch(t){this.$_emitMapEvent("layer-does-not-exist",{map:this.map,component:this,layerId:this.sourceId,error:t})}if(this.clearSource)try{this.map.removeSource(this.sourceId)}catch(t){this.$_emitMapEvent("source-does-not-exist",{map:this.map,component:this,sourceId:this.sourceId,error:t})}}},methods:{$_bindEvents:function(t){var e=this;0!==t.length&&t.forEach(function(t){e.map.on(t,e.layerId,function(t){e.$_emitMapEvent(""+t,{mapEvent:t})})})},$_unBindEvents:function(t){var e=this;t.forEach(function(t){e.map.off(t,e.layerId)})},$_watchSourceLoading:function(t){"source"===t.dataType&&t.sourceId===this.sourceId&&(this.$_emitMapEvent("layer-source-loading",{sourceId:this.sourceId}),this.map.off("dataloading",this.$_watchSourceLoading))},move:function(t){this.map.moveLayer(this.layerId,t),this.$_emitMapEvent("layer-moved",{layerId:this.layerId,beforeId:t})},remove:function(){this.map.removeLayer(this.layerId),this.$_emitMapEvent("layer-removed",{layerId:this.layerId})}}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["mousedown","mouseup","click","dblclick","mousemove","mouseenter","mouseleave","mouseover","mouseout","contextmenu","touchstart","touchend","touchcancel"]},function(t,e,o){var r=o(0)(o(22),o(41),null,null,null);t.exports=r.exports},function(t,e,o){var r=o(0)(o(23),o(37),null,null,null);t.exports=r.exports},function(t,e,o){var r=o(0)(o(24),o(42),null,null,null);t.exports=r.exports},function(t,e,o){var r=o(0)(o(25),o(46),null,null,null);t.exports=r.exports},function(t,e,o){var r=o(0)(o(26),o(40),null,null,null);t.exports=r.exports},function(t,e,o){var r=o(0)(o(27),o(36),null,null,null);t.exports=r.exports},function(t,e,o){var r=o(0)(o(28),o(39),null,null,null);t.exports=r.exports},function(t,e,o){var r=o(0)(o(29),o(45),null,null,null);t.exports=r.exports},function(t,e,o){var r=o(0)(o(30),o(38),null,null,null);t.exports=r.exports},function(t,e,o){var r=o(0)(o(31),o(43),null,null,null);t.exports=r.exports},function(t,e,o){var r=o(0)(o(32),o(47),null,null,null);t.exports=r.exports},function(t,e,o){var r=o(0)(o(33),o(49),null,null,null);t.exports=r.exports},function(t,e,o){var r=o(0)(o(34),o(48),null,null,null);t.exports=r.exports},function(t,e,o){var r=o(0)(o(35),o(44),null,null,null);t.exports=r.exports},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={resize:"resize",webglcontextlost:"webglcontextlost",webglcontextrestored:"webglcontextrestored",remove:"remove",movestart:"movestart",load:"load",contextmenu:"contextmenu",dblclick:"dblclick",click:"click",touchcancel:"touchcancel",touchmove:"touchmove",touchend:"touchend",touchstart:"touchstart",dataloading:"dataloading",mousemove:"mousemove",mouseup:"mouseup",mousedown:"mousedown",sourcedataloading:"sourcedataloading",error:"error",data:"data",styledata:"styledata",sourcedata:"sourcedata",mouseout:"mouseout",styledataloading:"styledataloading",moveend:"moveend",move:"move",render:"render",zoom:"zoom",zoomstart:"zoomstart",zoomend:"zoomend",boxzoomstart:"boxzoomstart",boxzoomcancel:"boxzoomcancel",boxzoomend:"boxzoomend",rotate:"rotate",rotatestart:"rotatestart",rotateend:"rotateend",dragend:"dragend",drag:"drag",dragstart:"dragstart",pitch:"pitch"}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={container:{type:[String,HTMLElement],default:function(){return"map-"+(""+Math.random()).split(".")[1]}},accessToken:{type:String,default:void 0},minZoom:{type:Number,default:0},maxZoom:{type:Number,default:22},mapStyle:{type:[String,Object],required:!0},hash:{type:Boolean,default:!1},interactive:{type:Boolean,default:!0},bearingSnap:{type:Number,default:7},attributionControl:{type:Boolean,default:!0},logoPosition:{type:String,default:"bottom-left"},failIfMajorPerformanceCaveat:{type:Boolean,default:!1},preserveDrawingBuffer:{type:Boolean,default:!1},refreshExpiredTiles:{type:Boolean,default:!0},maxBounds:{type:Array,default:function(){}},scrollZoom:{type:[Boolean,Object],default:function(){return!0}},boxZoom:{type:Boolean,default:!0},dragRotate:{type:Boolean,default:!0},dragPan:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},doubleClickZoom:{type:Boolean,default:!0},touchZoomRotate:{type:[Boolean,Object],default:function(){return!0}},trackResize:{type:Boolean,default:!0},center:{type:[Object,Array],default:void 0},zoom:{type:Number,default:0},bearing:{type:Number,default:0},pitch:{type:Number,default:0},renderWorldCopies:{type:Boolean,default:!0},RTLTextPluginUrl:{type:String,default:void 0},light:{type:Object},tileBoundaries:{type:Boolean,default:!1},collisionBoxes:{type:Boolean,default:!1},repaint:{type:Boolean,default:!1}}},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.MglPopup=e.MglMarker=e.MglVectorLayer=e.MglVideoLayer=e.MglCanvasLayer=e.MglImageLayer=e.MglGeojsonLayer=e.MglScaleControl=e.MglAttributionControl=e.MglFullscreenControl=e.MglGeocoderControl=e.MglGeolocateControl=e.MglNavigationControl=e.MglMap=void 0;var i=o(5),n=r(i),a=o(11),s=r(a),u=o(9),c=r(u),d=o(8),l=r(d),h=o(7),p=r(h),m=o(6),f=r(m),v=o(13),y=r(v),g=o(10),_=r(g),$=o(12),b=r($),M=o(15),x=r(M),I=o(16),P=r(I),L=o(14),w=r(L),z=o(18),S=r(z),E=o(17),C=r(E);e.MglMap=n.default,e.MglNavigationControl=s.default,e.MglGeolocateControl=c.default,e.MglGeocoderControl=l.default,e.MglFullscreenControl=p.default,e.MglAttributionControl=f.default,e.MglScaleControl=y.default,e.MglGeojsonLayer=x.default,e.MglImageLayer=P.default,e.MglCanvasLayer=w.default,e.MglVideoLayer=S.default,e.MglVectorLayer=C.default,e.MglMarker=_.default,e.MglPopup=b.default;e.default={install:function(t,e){t.mixin({data:function(){return{mapbox:e.mapboxgl}}})}}},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},n=o(19),a=r(n),s=o(20),u=r(s);e.default={name:"GlMap",props:u.default,data:function(){return{initial:!0,baseMap:!0,mapLoaded:!1}},computed:{loaded:function(){return this.map.loaded()},version:function(){return this.map.version},bounds:function(){return this.map.getBounds()},isStyleLoaded:function(){return this.map.isStyleLoaded()},areTilesLoaded:function(){return this.map.areTilesLoaded()},isMoving:function(){return this.map.isMoving()},canvas:function(){return this.map.getCanvas()},canvasContainer:function(){return this.map.getCanvasContainer()}},watch:{maxBounds:function(t){this.initial||(this.map.setMaxBounds(t),this.maxBounds=t)},minZoom:function(t){this.initial||(this.map.setMinZoom(t),this.minZoom=t)},maxZoom:function(t){this.initial||(this.map.setMaxZoom(t),this.maxZoom=t)},mapStyle:function(t){this.initial||(this.map.setStyle(t),this.mapStyle=t)},collisionBoxes:function(t){this.initial||(this.map.showCollisionBoxes=t,this.showCollisionBoxes=t)},tileBoundaries:function(t){this.initial||(this.map.showTileBoundaries=t,this.showTileBoundaries=t)},repaint:function(t){this.initial||(this.map.repaint=t,this.repaint=t)},zoom:function(t){this.initial||(this.map.setZoom(t),this.zoom=t)},center:function(t){this.initial||(this.map.setCenter(t),this.center=t)},bearing:function(t){this.initial||(this.map.setBearing(t),this.bearing=t)},pitch:function(t){this.initial||(this.map.setPitch(t),this.pitch=t)},light:function(t){this.initial||(this.map.setLight(t),this.light=t)}},created:function(){this.map=null},mounted:function(){var t=this;this.$_loadMap().then(function(e){t.map=e,void 0!==t.RTLTextPluginUrl&&e.setRTLTextPlugin(t.RTLTextPluginUrl,t.$_RTLTextPluginError),t.$emit("load",{map:e,component:t});var o=Object.keys(a.default),r=Object.keys(t.$options._parentListeners).filter(function(t){return-1!==o.indexOf(t)});t.$_bindEvents(r),t.$_bindPropsUpdateEvents(),t.initial=!0,t.mapLoaded=!0})},destroyed:function(){this.map&&this.map.remove()},methods:{$_bindPropsUpdateEvents:function(){var t=this;this.map.on("moveend",function(e){return t.$emit("update:center",t.map.getCenter())}),this.map.on("zoomend",function(e){return t.$emit("update:zoom",t.map.getZoom())}),this.map.on("rotate",function(e){return t.$emit("update:bearing",t.map.getBearing())}),this.map.on("pitch",function(e){return t.$emit("update:pitch",t.map.getPitch())})},$_loadMap:function(){var t=this;return new Promise(function(e){t.accessToken&&(t.mapbox.accessToken=t.accessToken);var o=new t.mapbox.Map(i({},t._props,{container:t.$el,style:t.mapStyle}));o.on("load",function(){return e(o)})})},$_RTLTextPluginError:function(t){this.$emit("rtl-plugin-error",{map:this.map,error:t})},$_bindEvents:function(t){var e=this;if(0!==t.length){var o=!0,r=!1,i=void 0;try{for(var n,a=t[Symbol.iterator]();!(o=(n=a.next()).done);o=!0)!function(){var t=n.value;e.map.on(t,function(o){e.$emit(t,o)})}()}catch(t){r=!0,i=t}finally{try{!o&&a.return&&a.return()}finally{if(r)throw i}}}},$_unBindEvents:function(t){var e=this;t.forEach(function(t){e.map.off(t)})},supported:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.map.supported({failIfMajorPerformanceCaveat:t})},resize:function(){this.map.resize()},project:function(t){return this.map.project(t)},unproject:function(t){return this.map.unproject(t)},queryRenderedFeatures:function(t,e){return this.map.queryRenderedFeatures(t,e)},querySourceFeatures:function(t,e){return this.map.querySourceFeatures(t,e)},addImage:function(t,e,o){this.map.addImage(t,e,o)},removeImage:function(t){this.map.removeImage(t)},loadImage:function(t,e){this.map.loadImage(t,e)},$_catchMoveFabric:function(t,e,o){var r=this;return function o(i){if(i.eventId===t.eventId){var n=r.map.getCenter();return r.$emit("update:center",n),r.map.off("moveend",o),e({eventData:t,center:n})}}},$_catchZoomFabric:function(t,e,o){var r=this;return function o(i){if(i.eventId===t.eventId){var n=r.map.getZoom();return r.$emit("update:zoom",n),r.map.off("zoomend",o),e({eventData:t,zoom:n})}}},$_catchRotateFabric:function(t,e,o){var r=this;return function o(i){if(i.eventId===t.eventId){var n=r.map.getBearing();r.$emit("update:bearing",n),r.map.off("rotate",o),e({eventData:t,bearing:n})}}},$_catchPitchFabric:function(t,e,o){var r=this;return function o(i){if(i.eventId===t.eventId){var n=r.map.getPitch();r.$emit("update:pitch",n),r.map.off("pitch",o),e({eventData:t,pitch:n})}}},panBy:function(t,e){var o=this,r={eventId:"panBy-"+(""+Math.random()).split(".")[1]};return 0===t[0]&&0===t[1]?new Promise(function(t,e){return t({center:o.map.getCenter()})}):new Promise(function(i,n){o.map.on("moveend",o.$_catchMoveFabric(r,i,n)),o.map.panBy(t,e,r)})},panTo:function(t,e){var o=this;t instanceof Array||(t=t.toArray());var r={eventId:"panTo-"+(""+Math.random()).split(".")[1]};return 0===t[0]&&0===t[1]?new Promise(function(t,e){return t({eventData:r,center:o.map.getCenter()})}):new Promise(function(i,n){o.map.on("moveend",o.$_catchMoveFabric(r,i,n)),o.map.panTo(t,e,r)})},zoomTo:function(t,e){var o=this,r={eventId:"zoomTo-"+(""+Math.random()).split(".")[1]};return t===this.map.getZoom()?new Promise(function(t,e){return t({eventData:r,zoom:o.map.getZoom()})}):new Promise(function(i,n){o.map.on("zoomend",o.$_catchZoomFabric(r,i,n)),o.map.zoomTo(t,e,r)})},zoomIn:function(t){var e=this;return new Promise(function(o,r){var i={eventId:"zoomIn-"+(""+Math.random()).split(".")[1]};e.map.on("zoomend",e.$_catchZoomFabric(i,o,r)),e.map.zoomIn(t,i)})},zoomOut:function(t){var e=this;return new Promise(function(o,r){var i={eventId:"zoomOut-"+(""+Math.random()).split(".")[1]};e.map.on("zoomend",e.$_catchZoomFabric(i,o,r)),e.map.zoomOut(t,i)})},rotateTo:function(t,e){var o=this;return t===this.map.getBearing()?new Promise(function(t,e){return t({bearing:o.map.getBearing()})}):new Promise(function(r,i){var n={eventId:"rotateTo-"+(""+Math.random()).split(".")[1]};o.map.on("rotate",o.$_catchRotateFabric(n,r,i)),o.map.rotateTo(t,e,n)})},resetNorth:function(t){var e=this;return new Promise(function(o,r){var i={eventId:"resetNorth-"+(""+Math.random()).split(".")[1]};e.map.on("rotate",e.$_catchRotateFabric(i,o,r)),e.map.resetNorth(t,i)})},snapToNorth:function(t){var e=this;return new Promise(function(o,r){var i={eventId:"snapToNorth-"+(""+Math.random()).split(".")[1]};e.map.on("rotate",e.$_catchRotateFabric(i,o,r)),e.map.snapToNorth(t,i)})},fitBounds:function(t,e){var o=this,r={eventId:"fitBounds-"+(""+Math.random()).split(".")[1]};if(t===this.map.getBounds())return new Promise(function(t,e){return t({eventData:r,bounds:o.map.getBounds()})});var i=new Promise(function(t,e){o.map.on("zoomend",o.$_catchZoomFabric(r,t,e))}),n=new Promise(function(t,e){o.map.on("moveend",o.$_catchMoveFabric(r,t,e))});return this.map.fitBounds(t,e,r),Promise.all([i,n]).then(function(t){return{eventData:r,bounds:o.map.getBounds()}})},jumpTo:function(t){var e=this,o={eventId:"jumpTo-"+(""+Math.random()).split(".")[1]},r=[];if(void 0!==t.bearing&&t.bearing!==this.map.getBearing()){var n=new Promise(function(t,r){e.map.on("rotate",e.$_catchRotateFabric(o,t,r))});r.push(n)}if(void 0!==t.zoom&&t.zoom!==this.map.getZoom()){var a=new Promise(function(t,r){e.map.on("zoomend",e.$_catchZoomFabric(o,t,r))});r.push(a)}if(void 0!==t.center&&t.center!==this.map.getCenter()){var s=new Promise(function(t,r){e.map.on("moveend",e.$_catchMoveFabric(o,t,r))});r.push(s)}if(void 0!==t.pitch&&t.pitch!==this.map.getPitch()){var u=new Promise(function(t,r){e.map.on("pitch",e.$_catchPitchFabric(o,t,r))});r.push(u)}return 0===r.length?new Promise(function(t,r){t({eventData:o,pitch:e.map.getPitch(),zoom:e.map.getZoom(),center:e.map.getCenter(),bearing:e.map.getBearing()})}):(this.map.jumpTo(t,o),Promise.all(r).then(function(t){var e={},r=!0,n=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value;Object.assign(e,c)}}catch(t){n=!0,a=t}finally{try{!r&&u.return&&u.return()}finally{if(n)throw a}}return i({},e,{eventData:o})}))},easeTo:function(t){var e=this,o=[],r={eventId:"easeTo-"+(""+Math.random()).split(".")[1]};if(void 0!==t.bearing&&t.bearing!==this.map.getBearing()){var n=new Promise(function(t,o){e.map.on("rotate",e.$_catchRotateFabric(r,t,o))});o.push(n)}if(void 0!==t.zoom&&t.zoom!==this.map.getZoom()){var a=new Promise(function(t,o){e.map.on("zoomend",e.$_catchZoomFabric(r,t,o))});o.push(a)}if(void 0!==t.center&&t.center!==this.map.getCenter()){var s=new Promise(function(t,o){e.map.on("moveend",e.$_catchMoveFabric(r,t,o))});o.push(s)}if(void 0!==t.pitch&&t.pitch!==this.map.getPitch()){var u=new Promise(function(t,o){e.map.on("pitch",e.$_catchPitchFabric(r,t,o))});o.push(u)}return 0===o.length?new Promise(function(t,o){t({eventData:r,pitch:e.map.getPitch(),zoom:e.map.getZoom(),center:e.map.getCenter(),bearing:e.map.getBearing()})}):(this.map.easeTo(t,r),Promise.all(o).then(function(t){var e={},o=!0,n=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var c=s.value;Object.assign(e,c)}}catch(t){n=!0,a=t}finally{try{!o&&u.return&&u.return()}finally{if(n)throw a}}return i({},e,{eventData:r})}))},flyTo:function(t){var e=this,o={eventId:"flyTo-"+(""+Math.random()).split(".")[1]},r=[];if(void 0!==t.bearing&&t.bearing!==this.map.getBearing()){var n=new Promise(function(t,r){e.map.on("rotate",e.$_catchRotateFabric(o,t,r))});r.push(n)}if(void 0!==t.zoom&&t.zoom!==this.map.getZoom()){var a=new Promise(function(t,r){e.map.on("zoomend",e.$_catchZoomFabric(o,t,r))});r.push(a)}if(void 0!==t.center&&t.center!==this.map.getCenter()){var s=new Promise(function(t,r){e.map.on("moveend",e.$_catchMoveFabric(o,t,r))});r.push(s)}if(void 0!==t.pitch&&t.pitch!==this.map.getPitch()){var u=new Promise(function(t,r){e.map.on("pitch",e.$_catchPitchFabric(o,t,r))});r.push(u)}return 0===r.length?new Promise(function(t,r){t({eventData:o,pitch:e.map.getPitch(),zoom:e.map.getZoom(),center:e.map.getCenter(),bearing:e.map.getBearing()})}):(this.map.flyTo(t,o),Promise.all(r).then(function(t){var e={},r=!0,n=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value;Object.assign(e,c)}}catch(t){n=!0,a=t}finally{try{!r&&u.return&&u.return()}finally{if(n)throw a}}return i({},e,{eventData:o})}))},stop:function(){this.map.stop();var t=[this.map.getPitch(),this.map.getZoom(),this.map.getBearing(),this.map.getCenter()],e=t[0],o=t[1],r=t[2],i=t[3];return this.$emit("update:pitch",e),this.$emit("update:zoom",o),this.$emit("update:bearing",r),this.$emit("update:center",i),Promise.resolve({pitch:e,zoom:o,bearing:r,center:i})}}}},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),n=r(i),a=o(2),s=r(a);e.default={name:"AttributionControl",mixins:[n.default,s.default],props:{compact:{type:Boolean,default:!0}},data:function(){return{control:void 0}},created:function(){this.control=new this.mapbox.AttributionControl({compact:this.compact})},methods:{$_deferredMount:function(t){this.map=t.map,this.map.addControl(this.control),this.$emit("added",this.control),t.component.$off("load",this.$_deferredMount)}}}},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),n=r(i),a=o(2),s=r(a);e.default={name:"FullscreenControl",mixins:[n.default,s.default],props:{position:{type:String,default:"top-right"}},data:function(){return{control:void 0}},created:function(){this.control=new this.mapbox.FullscreenControl},methods:{$_deferredMount:function(t){this.map=t.map,this.map.addControl(this.control,this.position),this.$emit("added",this.control),t.component.$off("load",this.$_deferredMount)}}}},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),n=r(i),a=o(2),s=r(a),u=o(!function(){var t=new Error('Cannot find module "mapbox-gl-geocoder"');throw t.code="MODULE_NOT_FOUND",t}()),c=r(u);e.default={name:"GeolocateControl",mixins:[n.default,s.default],props:{position:{type:String,default:"top-right"},accessToken:{type:String,default:void 0}},data:function(){return{control:void 0}},created:function(){var t=this;this.accessToken&&(this.mapbox.accessToken=this.accessToken),this.control=new c.default(this._props),this.control.on("error",function(e){t.$emit("geocoder-error",e)}),this.control.on("result",function(e){t.$emit("geocoder-result",e)})},methods:{$_deferredMount:function(t){this.map=t.map,this.map.addControl(this.control),this.$emit("added",this.control),t.component.$off("load",this.$_deferredMount)}}}},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),n=r(i),a=o(2),s=r(a);e.default={name:"GeolocateControl",mixins:[n.default,s.default],props:{position:{type:String,default:"top-right"},positionOptions:{type:Object,default:function(){return{enableHighAccuracy:!1,timeout:6e3}}},watchPosition:{type:Boolean,default:!1}},data:function(){return{control:void 0}},created:function(){var t=this;this.control=new this.mapbox.GeolocateControl(this._props),this.control.on("error",function(e){t.$emit("geolocate-error",e)}),this.control.on("geolocate",function(e){t.$emit("geolocate-error",e)})},methods:{$_deferredMount:function(t){this.map=t.map,this.map.addControl(this.control),this.$emit("added",this.control),t.component.$off("load",this.$_deferredMount)}}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},i=o(1),n=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={name:"Marker",mixins:[n.default],props:{offset:{type:[Object,Array],default:function(){return[0,0]}},coordinates:{type:Array,required:!0}},data:function(){return{initial:!0,marker:void 0}},mounted:function(){this.$_checkMapTree()},beforeDestroy:function(){void 0!==this.map&&void 0!==this.marker&&this.marker.remove()},watch:{coordinates:function(t){this.initial||this.marker.setLngLat(t)}},methods:{$_deferredMount:function(t){this.$slots.marker?this.marker=new this.mapbox.Marker(this.$slots.marker[0].elm,r({},this._props)):this.marker=new this.mapbox.Marker,this.map=t.map,this.$_addMarker(),this.initial=!1,t.component.$off("load",this.$_deferredMount)},$_addMarker:function(){this.marker.setLngLat(this.coordinates).addTo(this.map),this.$_emitMapEvent("added",{marker:this.marker})},remove:function(){this.marker.remove(),this.$_emitMapEvent("removed",{marker:this.marker})},togglePopup:function(){this.marker.togglePopup()}}}},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),n=r(i),a=o(2),s=r(a);e.default={name:"NavigationControl",mixins:[n.default,s.default],props:{position:{type:String,default:"top-right"}},data:function(){return{control:void 0}},created:function(){this.control=new this.mapbox.NavigationControl},methods:{$_deferredMount:function(t){this.map=t.map,this.map.addControl(this.control,this.position),this.$_emitMapEvent("added",{control:this.control}),t.component.$off("load",this.$_deferredMount)}}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},i=o(1),n=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={name:"Popup",mixins:[n.default],props:{closeButton:{type:Boolean,default:!0},closeOnClick:{type:Boolean,default:!0},anchor:{validator:function(t){var e=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"];return"string"==typeof t&&-1!==e.indexOf(t)||void 0===t},default:void 0},offset:{type:[Number,Object,Array],default:function(){return[0,0]}},coordinates:{type:Array},onlyText:{type:Boolean,default:!1}},data:function(){return{initial:!0,popup:void 0}},computed:{isOpen:function(){return void 0!==this.popup&&this.popup.isOpen()}},mounted:function(){this.$_checkMapTree()},beforeDestroy:function(){this.map&&(this.$_emitMapEvent("popup-removed",{popup:this.popup}),this.popup.remove())},watch:{coordinates:function(t){this.initial||this.popup.setLngLat(t)}},methods:{$_deferredMount:function(t){this.map=t.map,this.$_addPopup(),this.initial=!1,t.component.$off("load",this.$_deferredMount)},$_addPopup:function(){var t=this;if(this.popup=new this.mapbox.Popup(r({},this._props)),void 0!==this.coordinates&&this.popup.setLngLat(this.coordinates),void 0!==this.$slots.default)if(this.onlyText)if(3===this.$slots.default[0].elm.nodeType){var e=document.createElement("span");e.appendChild(this.$slots.default[0].elm),this.popup.setText(e.innerText)}else this.popup.setText(this.$slots.default[0].elm.innerText);else this.popup.setDOMContent(this.$slots.default[0].elm);this.popup.addTo(this.map),this.$_emitMapEvent("added",{popup:this.popup}),this.popup.on("close",this.$_onClose),void 0!==this.$parent.marker?this.$parent.marker.setPopup(this.popup):this.$parent.$once("added",function(e){e.marker.setPopup(t.popup)})},$_onClose:function(){this.$_emitMapEvent("close",{popup:this.popup})}}}},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),n=r(i),a=o(2),s=r(a);e.default={name:"ScaleControl",mixins:[n.default,s.default],props:{maxWidth:{type:Number,default:150},unit:{type:String,default:"metric"}},data:function(){return{control:void 0}},created:function(){this.control=new this.mapbox.ScaleControl(this._props)},methods:{$_deferredMount:function(t){this.map=t.map;try{this.map.addControl(this.control)}catch(t){console.log(t)}this.$emit("added",this.control),t.component.$off("load",this.$_deferredMount)}}}},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(4),n=r(i),a=o(3),s=r(a);e.default={name:"CanvasLayer",mixins:[s.default],props:{coordinates:{type:Array,required:!0},animate:{type:Boolean,default:!0}},data:function(){return{source:void 0}},mounted:function(){if("canvas"!==this.$slots.default[0].tag)throw new Error('Error in map layer component with source id "'+this.sourceId+'" and layer id "'+this.layerId+'"\n        You need to add canvas element as child of canvas layer.');this.$_checkMapTree()},computed:{canvas:function(){return this.map.getSource(this.sourceId).getCanvas()}},watch:{minzoom:function(t){this.initial||this.map.setLayerZoomRange(this.layerId,t,this.maxzoom)},maxzoom:function(t){this.initial||this.map.setLayerZoomRange(this.layerId,this.minzoom,t)},coordinates:function(t){this.initial||this.source.setCoordinates(t)}},methods:{$_deferredMount:function(t){var e={type:"canvas",coordinates:this.coordinates,animate:this.animate,canvas:this.$slots.default[0].data.attrs.id};this.map=t.map,this.map.on("dataloading",this.$_watchSourceLoading);try{this.map.addSource(this.sourceId,e)}catch(t){this.replaceSource?(this.map.removeSource(this.sourceId),this.map.addSource(this.sourceId,e)):this.$_emitMapEvent("layer-source-error",{sourceId:this.sourceId,error:t})}this.source=this.map.getSource(this.sourceId),this.$_addLayer(),this.listenUserEvents&&this.$_bindEvents(n.default),t.component.$off("load",this.$_deferredMount),this.initial=!1},$_addLayer:function(){var t=this.map.getLayer(this.layerId);if(t){if(!this.replace)return this.$_emitMapEvent("layer-exists",{layerId:this.layerId}),t;this.map.removeLayer(this.layerId)}var e={id:this.layerId,source:this.sourceId,type:"raster"};this.refLayer?e.ref=this.refLayer:(this["source-layer"]&&(e["source-layer"]=this["source-layer"]),this.minzoom&&(e.minzoom=this.minzoom),this.maxzoom&&(e.maxzoom=this.maxzoom)),e.paint=this.paint?this.paint:{"raster-opacity":.85},e.metadata=this.metadata,this.map.addLayer(e,this.before),this.$_emitMapEvent("added",{layerId:this.layerId})}}}},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(4),n=r(i),a=o(3),s=r(a);e.default={name:"GeojsonLayer",mixins:[s.default],props:{source:{type:[Object,String]},type:{validator:function(t){var e=["fill","line","symbol","circle","fill-extrusion","raster","background"];return"string"==typeof t&&-1!==e.indexOf(t)||void 0===t},default:"fill"},filter:{type:Array,default:void 0}},watch:{source:function(t){this.initial||this.map.getSource(this.sourceId).setData(t)},filter:function(t){this.initial||this.map.setFilter(this.layerId,t)}},methods:{$_deferredMount:function(t){if(this.map=t.map,this.map.on("dataloading",this.$_watchSourceLoading),this.source)try{this.map.addSource(this.sourceId,{type:"geojson",data:this.source})}catch(t){this.replaceSource?(this.map.removeSource(this.sourceId),this.map.addSource(this.sourceId,{type:"geojson",data:this.source})):this.$_emitMapEvent("layer-source-error",{sourceId:this.sourceId,error:t})}this._addLayer(),this.listenUserEvents&&this.$_bindEvents(n.default),this.map.off("dataloading",this.$_watchSourceLoading),this.initial=!1,t.component.$off("load",this.$_deferredMount)},_addLayer:function(){var t=this.map.getLayer(this.layerId);if(t){if(!this.replace)return this.$_emitMapEvent("layer-exists",{layerId:this.layerId}),t;this.map.removeLayer(this.layerId)}var e={id:this.layerId,source:this.sourceId};this.refLayer?e.ref=this.refLayer:(e.type=this.type?this.type:"fill",e.source=this.sourceId,this["source-layer"]&&(e["source-layer"]=this["source-layer"]),this.minzoom&&(e.minzoom=this.minzoom),this.maxzoom&&(e.maxzoom=this.maxzoom),this.layout&&(e.layout=this.layout),this.filter&&(e.filter=this.filter)),e.paint=this.paint?this.paint:{"fill-color":"rgba("+3*this.layerId.length*12+",153,80,0.55)"},e.metadata=this.metadata,this.map.addLayer(e,this.before),this.$_emitMapEvent("added",{layerId:this.layerId})}}}},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(3),n=r(i),a=o(4),s=r(a);e.default={name:"ImageLayer",mixins:[n.default],props:{coordinates:{type:Array,required:!0},url:{type:String,required:!0}},data:function(){return{source:void 0}},watch:{coordinates:function(t){this.initial||this.source.setCoordinates(t)}},methods:{$_deferredMount:function(t){var e={type:"image",url:this.url,coordinates:this.coordinates};this.map=t.map,this.map.on("dataloading",this.$_watchSourceLoading);try{this.map.addSource(this.sourceId,e)}catch(t){this.replaceSource?(this.map.removeSource(this.sourceId),this.map.addSource(this.sourceId,e)):this.$_emitMapEvent("layer-source-error",{sourceId:this.sourceId,error:t})}this.source=this.map.getSource(this.sourceId),this.$_addLayer(),this.listenUserEvents&&this.$_bindEvents(s.default),this.initial=!1,t.component.$off("load",this.$_deferredMount)},$_addLayer:function(){var t=this.map.getLayer(this.layerId);if(t){if(!this.replace)return this._emitMapEvent("layer-exists",{layerId:this.layerId}),t;this.map.removeLayer(this.layerId)}var e={id:this.layerId,source:this.sourceId,type:"raster"};this.refLayer?e.ref=this.refLayer:(this["source-layer"]&&(e["source-layer"]=this["source-layer"]),this.minzoom&&(e.minzoom=this.minzoom),this.maxzoom&&(e.maxzoom=this.maxzoom),this.layout&&(e.layout=this.layout),this.filter&&(e.filter=this.filter)),e.paint=this.paint?this.paint:{"raster-opacity":1},e.metadata=this.metadata,this.map.addLayer(e,this.before),this.$_emitMapEvent("added",{layerId:this.layerId})}}}},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(4),n=r(i),a=o(3),s=r(a);e.default={name:"VectorLayer",mixins:[s.default],props:{url:{type:String,default:void 0},tiles:{type:Array,default:function(){return[]}},tilesMinZoom:{type:Number,default:void 0},tilesMaxZoom:{type:Number,default:void 0},filter:{type:Array,default:void 0}},watch:{filter:function(t){this.initial||this.map.setFilter(this.layerId,t)}},methods:{$_deferredMount:function(t){if(t.mapId===this.mapId){this.map=t.map;var e={type:"vector",tilesMinZoom:this.tilesMinZoom,tilesMaxZoom:this.tilesMaxZoom,url:this.url,tiles:this.tiles};this.map.on("dataloading",this.$_watchSourceLoading);try{this.map.addSource(this.sourceId,e)}catch(t){this.replaceSource?(this.map.removeSource(this.sourceId),this.map.addSource(this.sourceId,e)):this.$_emitMapEvent("layer-source-error",{sourceId:this.sourceId,error:t})}this._addLayer(),this.listenUserEvents&&this.$_bindEvents(n.default),this.map.off("dataloading",this.$_watchSourceLoading),this.initial=!1,t.mapComponent.$on("load",this.$_deferredMount)}},_addLayer:function(){var t=this.map.getLayer(this.layerId);if(t){if(!this.replace)return this.$_emitMapEvent("layer-exists",{layerId:this.layerId}),t;this.map.removeLayer(this.layerId)}var e={id:this.layerId,source:this.sourceId};this.refLayer?e.ref=this.refLayer:(e.type=this.type?this.type:"fill",e.source=this.sourceId,e["source-layer"]=this["source-layer"],this.minzoom&&(e.minzoom=this.minzoom),this.maxzoom&&(e.maxzoom=this.maxzoom),this.layout&&(e.layout=this.layout),this.filter&&(e.filter=this.filter)),e.paint=this.paint?this.paint:{"fill-color":"rgba("+3*this.layerId.length*12+",153,80,0.55)"},e.metadata=this.metadata,this.map.addLayer(e,this.before),this.$_emitMapEvent("added",{layerId:this.layerId})}}}},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(4),n=r(i),a=o(3),s=r(a);e.default={name:"VideoLayer",mixins:[s.default],props:{coordinates:{type:Array,required:!0},urls:{type:Array,required:!0}},data:function(){return{source:void 0}},computed:{video:function(){return this.map.getSource(this.sourceId).getVideo()}},watch:{coordinates:function(t){this.initial||this.source.setCoordinates(t)}},methods:{_deferredMount:function(t){var e={type:"video",urls:this.urls,coordinates:this.coordinates};this.map=t.map,this.map.on("dataloading",this.$_watchSourceLoading);try{this.map.addSource(this.sourceId,e)}catch(t){this.replaceSource?(this.map.removeSource(this.sourceId),this.map.addSource(this.sourceId,e)):this.$_emitMapEvent("layer-source-error",{sourceId:this.sourceId,error:t})}this.source=this.map.getSource(this.sourceId),this.$_addLayer(),this.listenUserEvents&&this.$_bindEvents(n.default),this.initial=!1,t.component.$off("load",this.$_deferredMount)},$_addLayer:function(){var t=this.map.getLayer(this.layerId);if(t){if(!this.replace)return this.$_emitMapEvent("layer-exists",{layerId:this.layerId}),t;this.map.removeLayer(this.layerId)}var e={id:this.layerId,source:this.sourceId,type:"background"};this.refLayer?e.ref=this.refLayer:(this["source-layer"]&&(e["source-layer"]=this["source-layer"]),this.minzoom&&(e.minzoom=this.minzoom),this.maxzoom&&(e.maxzoom=this.maxzoom)),e.metadata=this.metadata,this.map.addLayer(e,this.before),this.$_emitMapEvent("added",{layerId:this.layerId})}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticStyle:{display:"none"}},[t._t("marker"),t._v(" "),t._t("default")],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{ref:"container",attrs:{id:t.container}},[t._t("default")],2)}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticStyle:{display:"none"}},[t._t("default")],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticStyle:{display:"none"}},[t._t("default")],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}}])});