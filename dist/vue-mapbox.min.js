!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["vue-mapbox"]=e():t["vue-mapbox"]=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=40)}([function(t,e){t.exports=function(t,e,n,r,o){var i,a=t=t||{},s=typeof t.default;"object"!==s&&"function"!==s||(i=t,a=t.default);var u="function"==typeof a?a.options:a;e&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns),r&&(u._scopeId=r);var c;if(o?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},u._ssrRegister=c):n&&(c=n),c){var l=u.functional,h=l?u.render:u.beforeCreate;l?u.render=function(t,e){return c.call(e),h(t,e)}:u.beforeCreate=h?[].concat(h,c):[c]}return{esModule:i,exports:a,options:u}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default={created:function(){this.map=null},mounted:function(){this.$_checkMapTree()},methods:{$_findBaseMap:function(){function t(n){n.baseMap?e=n:void 0!==n.$parent&&t(n.$parent)}var e=null;if(t(this.$parent),void 0===e)throw new Error("Component must have root map");return e},$_checkMapTree:function(){var t=this.$_findBaseMap();t&&(t.mapLoaded?this.$_deferredMount({component:t,map:t.map}):t.$on("load",this.$_deferredMount))},$_emitMapEvent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$emit(t,r({map:this.map,component:this},e))}}}},function(t,e,n){"use strict";function r(t){return t}function o(t){return t}function i(t){return t}function a(t){if(!(this instanceof a))return new a(t);c(this,t)}function s(t){var e,n,s,c;return t=t||{},e=t.init||r,n=t.request||o,s=t.success||t.response||i,c=t.error||function(){return Promise.resolve((t.response||i).apply(this,arguments)).then(Promise.reject.bind(Promise))},function(r,o){function i(t){var e,u;return e={},u={arguments:Array.prototype.slice.call(arguments),client:i},t="string"==typeof t?{path:t}:t||{},t.originator=t.originator||i,l(n.call(e,t,o,u),function(t){var n,i,l;return l=r,t instanceof a&&(i=t.abort,l=t.client||l,n=t.response,t=t.request),n=n||Promise.resolve(t).then(function(t){return Promise.resolve(l(t)).then(function(t){return s.call(e,t,o,u)},function(t){return c.call(e,t,o,u)})}),i?Promise.race([n,i]):n},function(e){return Promise.reject({request:t,error:e})})}return"object"==typeof r&&(o=r),"function"!=typeof r&&(r=t.client||u),o=e(o||{}),h(i,r)}}/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
var u,c,l,h;u=n(12),c=n(6),l=n(9),h=n(8),s.ComplexRequest=a,t.exports=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={beforeDestroy:function(){void 0!==this.map&&this.map.removeControl(this.control)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n(1),i=function(t){return t&&t.__esModule?t:{default:t}}(o),a={sourceId:{type:String}},s={layerId:{type:String,required:!0},metadata:Object,refLayer:String,"source-layer":String,minZoom:Number,maxZoom:Number,paint:Object,layout:Object,before:Object},u={clearSource:{type:Boolean,default:!0},replaceSource:{type:Boolean,default:!1},replace:{type:Boolean,default:!1}};e.default={mixins:[i.default],props:r({},a,s,u),data:function(){return{initial:!0}},computed:{sourceLoaded:function(){return this.map.isSourceLoaded(this.sourceId)},mapLayer:function(){return this.map.getLayer(this.layerId)}},watch:{minzoom:function(t){this.initial||this.map.setLayerZoomRange(this.layerId,t,this.maxzoom)},maxzoom:function(t){this.initial||this.map.setLayerZoomRange(this.layerId,this.minzoom,t)},paint:function(t){if(!this.initial){var e=!0,n=!1,r=void 0;try{for(var o,i=Object.keys(this.paint)[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;this.paint[a]!==t[a]&&(this.map.setPaintProperty(this.layerId,a,t[a]),this.paint[a]=t[a])}}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}}},layout:function(t){if(!this.initial){var e=!0,n=!1,r=void 0;try{for(var o,i=Object.keys(this.layout)[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;this.layout[a]!==t[a]&&(this.map.setLayoutProperty(this.layerId,a,t[a]),this.layout[a]=t[a])}}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}}}},beforeDestroy:function(){if(this.map){try{this.map.removeLayer(this.layerId)}catch(t){this.$_emitMapEvent("layer-does-not-exist",{map:this.map,component:this,layerId:this.sourceId,error:t})}if(this.clearSource)try{this.map.removeSource(this.sourceId)}catch(t){this.$_emitMapEvent("source-does-not-exist",{map:this.map,component:this,sourceId:this.sourceId,error:t})}}},methods:{$_bindEvents:function(t){var e=this;0!==t.length&&t.forEach(function(t){e.map.on(t,e.layerId,function(t){e.$_emitMapEvent(""+t,{mapEvent:t})})})},$_unBindEvents:function(t){var e=this;t.forEach(function(t){e.map.off(t,e.layerId)})},$_watchSourceLoading:function(t){"source"===t.dataType&&t.sourceId===this.sourceId&&(this.$_emitMapEvent("layer-source-loading",{sourceId:this.sourceId}),this.map.off("dataloading",this.$_watchSourceLoading))},move:function(t){this.map.moveLayer(this.layerId,t),this.$_emitMapEvent("layer-moved",{layerId:this.layerId,beforeId:t})},remove:function(){this.map.removeLayer(this.layerId),this.$_emitMapEvent("layer-removed",{layerId:this.layerId})}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["mousedown","mouseup","click","dblclick","mousemove","mouseenter","mouseleave","mouseover","mouseout","contextmenu","touchstart","touchend","touchcancel"]},function(t,e,n){"use strict";function r(t){var e,n,r,i;for(t||(t={}),e=1,n=arguments.length;e<n;e+=1){r=arguments[e];for(i in r)i in t&&(t[i]===r[i]||i in o&&o[i]===r[i])||(t[i]=r[i])}return t}/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
var o={};t.exports=r},function(t,e,n){"use strict";(function(t){"undefined"==typeof Promise&&n(55).polyfill(),t.export=Promise}).call(e,n(19)(t))},function(t,e,n){"use strict";/*
 * Copyright 2014-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
t.exports=function(t,e){return e&&(t.skip=function(){return e}),t.wrap=function(e,n){return e(t,n)},t.chain=function(){return"undefined"!=typeof console&&console.log("rest.js: client.chain() is deprecated, use client.wrap() instead"),t.wrap.apply(this,arguments)},t}},function(t,e,n){"use strict";function r(t,e){return t.then(function(t){return t&&t[e]},function(t){return Promise.reject(t&&t[e])})}function o(){return r(this,"entity")}function i(){return r(r(this,"status"),"code")}function a(){return r(this,"headers")}function s(t){return t=h(t),r(this.headers(),t)}function u(t){return t=[].concat(t),c(t.reduce(function(t,e){return t.then(function(t){if("string"==typeof e&&(e={rel:e}),"function"!=typeof t.entity.clientFor)throw new Error("Hypermedia response expected");return t.entity.clientFor(e.rel)({params:e.params})})},this))}function c(t){return t.status=i,t.headers=a,t.header=s,t.entity=o,t.follow=u,t}function l(t,e,n){return c(Promise.resolve(t).then(e,n))}/*
 * Copyright 2014-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
var h=n(18);l.make=c,l.reject=function(t){return c(Promise.reject(t))},l.promise=function(t){return c(new Promise(t))},t.exports=l},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=function(t,e,n,r,o,i,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,i,a,s],l=0;u=new Error(e.replace(/%s/g,function(){return c[l++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};t.exports=r},function(t,e,n){"use strict";function r(){return i.apply(void 0,arguments)}/*
 * Copyright 2014-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
var o,i,a;o=n(8),"function"!=typeof Promise&&console&&console.log&&console.log("An ES6 Promise implementation is required to use rest.js. See https://github.com/cujojs/when/blob/master/docs/es6-promise-shim.md for using when.js as a Promise polyfill."),r.setDefaultClient=function(t){i=t},r.getDefaultClient=function(){return i},r.resetDefaultClient=function(){i=a},r.setPlatformDefaultClient=function(t){if(a)throw new Error("Unable to redefine platformDefaultClient");i=a=t},t.exports=o(r)},function(t,e,n){"use strict";function r(t,e){return 0===t.indexOf(e)}function o(t,e){return t.lastIndexOf(e)+e.length===t.length}/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
var i,a;i=n(2),a=n(66),t.exports=i({request:function(t,e){var n;return e.prefix&&!new a(t.path).isFullyQualified()&&(n=e.prefix,t.path&&(o(n,"/")||r(t.path,"/")||(n+="/"),n+=t.path),t.path=n),t}})},function(t,e,n){"use strict";/*
 * Copyright 2015-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
var r,o,i;r=n(2),o=n(82),i=n(6),t.exports=r({init:function(t){return t.params=t.params||{},t.template=t.template||"",t},request:function(t,e){var n,r;return n=t.path||e.template,r=i({},t.params,e.params),t.path=o.expand(n,r),delete t.params,t}})},function(t,e,n){"use strict";/*
* Copyright 2014-2016 the original author or authors
* @license MIT, see LICENSE.txt for details
*
* @author Scott Andrews
*/
function r(t){var e,n;return e=t.split(";"),n=e[0].trim().split("+"),{raw:t,type:n[0],suffix:n[1]?"+"+n[1]:"",params:e.slice(1).reduce(function(t,e){return e=e.split("="),t[e[0].trim()]=e[1]?e[1].trim():void 0,t},{})}}t.exports={parse:r}},function(t,e,n){"use strict";function r(t){return t=encodeURIComponent(t),t.replace(a,"+")}function o(t){return t=t.replace(s," "),decodeURIComponent(t)}function i(t,e,n){return Array.isArray(n)?n.forEach(function(n){t=i(t,e,n)}):(t.length>0&&(t+="&"),t+=r(e),void 0!==n&&null!==n&&(t+="="+r(n))),t}/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
var a,s;a=/%20/g,s=/\+/g,t.exports={read:function(t){var e={};return t.split("&").forEach(function(t){var n,r,i;n=t.split("="),r=o(n[0]),i=2===n.length?o(n[1]):null,r in e?(Array.isArray(e[r])||(e[r]=[e[r]]),e[r].push(i)):e[r]=i}),e},write:function(t){var e="";return Object.keys(t).forEach(function(n){e=i(e,n,t[n])}),e}}},function(t,e,n){"use strict";/*
 * Copyright 2015-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
function r(t){try{return Promise.resolve(t())}catch(t){return Promise.reject(t)}}t.exports=r},function(t,e,n){"use strict";/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
function r(t){return t.toLowerCase().split("-").map(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}).join("-")}t.exports=r},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";e.decode=e.parse=n(104),e.encode=e.stringify=n(105)},function(t,e,n){var r=n(0)(n(41),n(92),null,null,null);t.exports=r.exports},function(t,e,n){var r=n(0)(n(42),n(87),null,null,null);t.exports=r.exports},function(t,e,n){var r=n(0)(n(43),n(93),null,null,null);t.exports=r.exports},function(t,e,n){var r=n(0)(n(44),n(97),null,null,null);t.exports=r.exports},function(t,e,n){var r=n(0)(n(45),n(91),null,null,null);t.exports=r.exports},function(t,e,n){var r=n(0)(n(46),n(88),null,null,null);t.exports=r.exports},function(t,e,n){var r=n(0)(n(47),n(90),null,null,null);t.exports=r.exports},function(t,e,n){var r=n(0)(n(48),n(96),null,null,null);t.exports=r.exports},function(t,e,n){var r=n(0)(n(49),n(89),null,null,null);t.exports=r.exports},function(t,e,n){var r=n(0)(n(50),n(94),null,null,null);t.exports=r.exports},function(t,e,n){var r=n(0)(n(51),n(98),null,null,null);t.exports=r.exports},function(t,e,n){var r=n(0)(n(52),n(100),null,null,null);t.exports=r.exports},function(t,e,n){var r=n(0)(n(53),n(99),null,null,null);t.exports=r.exports},function(t,e,n){var r=n(0)(n(54),n(95),null,null,null);t.exports=r.exports},function(t,e){t.exports={"country.6646126669086080":{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},"country.12862386939497690":{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},"country.10299371396720960":{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},"country.15589894856372040":{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}},function(t,e,n){"use strict";function r(t){this._eventEmitter=new s,this.options=a({},this.options,t)}var o=n(83),i=n(57),a=n(37),s=n(101).EventEmitter,u=n(35),c=n(64);r.prototype={options:{placeholder:"Search",zoom:16,flyTo:!0,minLength:2,limit:5},onAdd:function(t){this._map=t,this.mapboxClient=new c(this.options.accessToken),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this._clear=this._clear.bind(this);var e=this.container=document.createElement("div");e.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=document.createElement("span");n.className="geocoder-icon geocoder-icon-search",this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.placeholder=this.options.placeholder,this._inputEl.addEventListener("keydown",this._onKeyDown),this._inputEl.addEventListener("change",this._onChange);var r=document.createElement("div");return r.classList.add("geocoder-pin-right"),this._clearEl=document.createElement("button"),this._clearEl.className="geocoder-icon geocoder-icon-close",this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this._clear),this._loadingEl=document.createElement("span"),this._loadingEl.className="geocoder-icon geocoder-icon-loading",r.appendChild(this._clearEl),r.appendChild(this._loadingEl),e.appendChild(n),e.appendChild(this._inputEl),e.appendChild(r),this._typeahead=new o(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit}),this._typeahead.getItemValue=function(t){return t.place_name},e},onRemove:function(){return this.container.parentNode.removeChild(this.container),this._map=null,this},_onKeyDown:i(function(t){var e=t.target.shadowRoot?t.target.shadowRoot.activeElement:t.target;if(!e.value)return this._clearEl.style.display="none";t.metaKey||-1!==[9,27,37,39,13,38,40].indexOf(t.keyCode)||e.value.length>=this.options.minLength&&this._geocode(e.value)},200),_onChange:function(){this._inputEl.value&&(this._clearEl.style.display="block");var t=this._typeahead.selected;if(t){if(this.options.flyTo)if(!u[t.id]&&(t.bbox&&t.context&&t.context.length<=3||t.bbox&&!t.context)){var e=t.bbox;this._map.fitBounds([[e[0],e[1]],[e[2],e[3]]])}else u[t.id]?this._map.fitBounds(u[t.id].bbox):this._map.flyTo({center:t.center,zoom:this.options.zoom});this._eventEmitter.emit("result",{result:t})}},_geocode:function(t){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});var e=this.mapboxClient.geocodeForward(t,this.options),n=[];return this.options.localGeocoder&&((n=this.options.localGeocoder(t))||(n=[])),e.then(function(t){this._loadingEl.style.display="none";var e=t.entity;e.features=e.features?n.concat(e.features):n,this.options.filter&&e.features.length&&(e.features=e.features.filter(this.options.filter)),e.features.length?this._clearEl.style.display="block":(this._clearEl.style.display="none",this._typeahead.selected=null),this._eventEmitter.emit("results",e),this._typeahead.update(e.features)}.bind(this)),e.catch(function(t){this._loadingEl.style.display="none",n.length?this._clearEl.style.display="block":(this._clearEl.style.display="none",this._typeahead.selected=null),this._eventEmitter.emit("results",{features:n}),this._typeahead.update(n),this._eventEmitter.emit("error",{error:t})}.bind(this)),e},_clear:function(t){t&&t.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._inputEl.focus(),this._clearEl.style.display="none",this._eventEmitter.emit("clear")},_onQueryResult:function(t){var e=t.entity;if(e.features.length){var n=e.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},query:function(t){return this._geocode(t).then(this._onQueryResult),this},setInput:function(t){return this._inputEl.value=t,this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this},setProximity:function(t){return this.options.proximity=t,this},getProximity:function(){return this.options.proximity},on:function(t,e){return this._eventEmitter.on(t,e),this},off:function(t,e){return this._eventEmitter.removeListener(t,e),this}},t.exports=r},function(t,e){function n(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var o in n)r.call(n,o)&&(t[o]=n[o])}return t}t.exports=n;var r=Object.prototype.hasOwnProperty},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={resize:"resize",webglcontextlost:"webglcontextlost",webglcontextrestored:"webglcontextrestored",remove:"remove",movestart:"movestart",load:"load",contextmenu:"contextmenu",dblclick:"dblclick",click:"click",touchcancel:"touchcancel",touchmove:"touchmove",touchend:"touchend",touchstart:"touchstart",dataloading:"dataloading",mousemove:"mousemove",mouseup:"mouseup",mousedown:"mousedown",sourcedataloading:"sourcedataloading",error:"error",data:"data",styledata:"styledata",sourcedata:"sourcedata",mouseout:"mouseout",styledataloading:"styledataloading",moveend:"moveend",move:"move",render:"render",zoom:"zoom",zoomstart:"zoomstart",zoomend:"zoomend",boxzoomstart:"boxzoomstart",boxzoomcancel:"boxzoomcancel",boxzoomend:"boxzoomend",rotate:"rotate",rotatestart:"rotatestart",rotateend:"rotateend",dragend:"dragend",drag:"drag",dragstart:"dragstart",pitch:"pitch"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={container:{type:[String,HTMLElement],default:function(){return"map-"+(""+Math.random()).split(".")[1]}},accessToken:{type:String,default:void 0},minZoom:{type:Number,default:0},maxZoom:{type:Number,default:22},mapStyle:{type:[String,Object],required:!0},hash:{type:Boolean,default:!1},interactive:{type:Boolean,default:!0},bearingSnap:{type:Number,default:7},attributionControl:{type:Boolean,default:!0},logoPosition:{type:String,default:"bottom-left"},failIfMajorPerformanceCaveat:{type:Boolean,default:!1},preserveDrawingBuffer:{type:Boolean,default:!1},refreshExpiredTiles:{type:Boolean,default:!0},maxBounds:{type:Array,default:function(){}},scrollZoom:{type:[Boolean,Object],default:function(){return!0}},boxZoom:{type:Boolean,default:!0},dragRotate:{type:Boolean,default:!0},dragPan:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},doubleClickZoom:{type:Boolean,default:!0},touchZoomRotate:{type:[Boolean,Object],default:function(){return!0}},trackResize:{type:Boolean,default:!0},center:{type:[Object,Array],default:void 0},zoom:{type:Number,default:0},bearing:{type:Number,default:0},pitch:{type:Number,default:0},renderWorldCopies:{type:Boolean,default:!0},RTLTextPluginUrl:{type:String,default:void 0},light:{type:Object},tileBoundaries:{type:Boolean,default:!1},collisionBoxes:{type:Boolean,default:!1},repaint:{type:Boolean,default:!1}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.MglPopup=e.MglMarker=e.MglVectorLayer=e.MglVideoLayer=e.MglCanvasLayer=e.MglImageLayer=e.MglGeojsonLayer=e.MglScaleControl=e.MglAttributionControl=e.MglFullscreenControl=e.MglGeocoderControl=e.MglGeolocateControl=e.MglNavigationControl=e.MglMap=void 0;var o=n(21),i=r(o),a=n(27),s=r(a),u=n(25),c=r(u),l=n(24),h=r(l),p=n(23),f=r(p),d=n(22),m=r(d),v=n(29),y=r(v),g=n(26),b=r(g),_=n(28),x=r(_),w=n(31),E=r(w),$=n(32),M=r($),C=n(30),I=r(C),j=n(34),L=r(j),P=n(33),A=r(P);e.MglMap=i.default,e.MglNavigationControl=s.default,e.MglGeolocateControl=c.default,e.MglGeocoderControl=h.default,e.MglFullscreenControl=f.default,e.MglAttributionControl=m.default,e.MglScaleControl=y.default,e.MglGeojsonLayer=E.default,e.MglImageLayer=M.default,e.MglCanvasLayer=I.default,e.MglVideoLayer=L.default,e.MglVectorLayer=A.default,e.MglMarker=b.default,e.MglPopup=x.default;e.default={install:function(t,e){t.mixin({data:function(){return{mapbox:e.mapboxgl}}})}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=n(38),a=r(i),s=n(39),u=r(s);e.default={name:"GlMap",props:u.default,data:function(){return{initial:!0,baseMap:!0,mapLoaded:!1}},computed:{loaded:function(){return this.map.loaded()},version:function(){return this.map.version},bounds:function(){return this.map.getBounds()},isStyleLoaded:function(){return this.map.isStyleLoaded()},areTilesLoaded:function(){return this.map.areTilesLoaded()},isMoving:function(){return this.map.isMoving()},canvas:function(){return this.map.getCanvas()},canvasContainer:function(){return this.map.getCanvasContainer()}},watch:{maxBounds:function(t){this.initial||(this.map.setMaxBounds(t),this.maxBounds=t)},minZoom:function(t){this.initial||(this.map.setMinZoom(t),this.minZoom=t)},maxZoom:function(t){this.initial||(this.map.setMaxZoom(t),this.maxZoom=t)},mapStyle:function(t){this.initial||(this.map.setStyle(t),this.mapStyle=t)},collisionBoxes:function(t){this.initial||(this.map.showCollisionBoxes=t,this.showCollisionBoxes=t)},tileBoundaries:function(t){this.initial||(this.map.showTileBoundaries=t,this.showTileBoundaries=t)},repaint:function(t){this.initial||(this.map.repaint=t,this.repaint=t)},zoom:function(t){this.initial||(this.map.setZoom(t),this.zoom=t)},center:function(t){this.initial||(this.map.setCenter(t),this.center=t)},bearing:function(t){this.initial||(this.map.setBearing(t),this.bearing=t)},pitch:function(t){this.initial||(this.map.setPitch(t),this.pitch=t)},light:function(t){this.initial||(this.map.setLight(t),this.light=t)}},created:function(){this.map=null},mounted:function(){var t=this;this.$_loadMap().then(function(e){t.map=e,void 0!==t.RTLTextPluginUrl&&e.setRTLTextPlugin(t.RTLTextPluginUrl,t.$_RTLTextPluginError),t.$emit("load",{map:e,component:t});var n=Object.keys(a.default),r=Object.keys(t.$options._parentListeners).filter(function(t){return-1!==n.indexOf(t)});t.$_bindEvents(r),t.$_bindPropsUpdateEvents(),t.initial=!0,t.mapLoaded=!0})},destroyed:function(){this.map&&this.map.remove()},methods:{$_bindPropsUpdateEvents:function(){var t=this;this.map.on("moveend",function(e){return t.$emit("update:center",t.map.getCenter())}),this.map.on("zoomend",function(e){return t.$emit("update:zoom",t.map.getZoom())}),this.map.on("rotate",function(e){return t.$emit("update:bearing",t.map.getBearing())}),this.map.on("pitch",function(e){return t.$emit("update:pitch",t.map.getPitch())})},$_loadMap:function(){var t=this;return new Promise(function(e){t.accessToken&&(t.mapbox.accessToken=t.accessToken);var n=new t.mapbox.Map(o({},t._props,{container:t.$el,style:t.mapStyle}));n.on("load",function(){return e(n)})})},$_RTLTextPluginError:function(t){this.$emit("rtl-plugin-error",{map:this.map,error:t})},$_bindEvents:function(t){var e=this;if(0!==t.length){var n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0)!function(){var t=i.value;e.map.on(t,function(n){e.$emit(t,n)})}()}catch(t){r=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}}},$_unBindEvents:function(t){var e=this;t.forEach(function(t){e.map.off(t)})},supported:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.map.supported({failIfMajorPerformanceCaveat:t})},resize:function(){this.map.resize()},project:function(t){return this.map.project(t)},unproject:function(t){return this.map.unproject(t)},queryRenderedFeatures:function(t,e){return this.map.queryRenderedFeatures(t,e)},querySourceFeatures:function(t,e){return this.map.querySourceFeatures(t,e)},addImage:function(t,e,n){this.map.addImage(t,e,n)},removeImage:function(t){this.map.removeImage(t)},loadImage:function(t,e){this.map.loadImage(t,e)},$_catchMoveFabric:function(t,e,n){var r=this;return function n(o){if(o.eventId===t.eventId){var i=r.map.getCenter();return r.$emit("update:center",i),r.map.off("moveend",n),e({eventData:t,center:i})}}},$_catchZoomFabric:function(t,e,n){var r=this;return function n(o){if(o.eventId===t.eventId){var i=r.map.getZoom();return r.$emit("update:zoom",i),r.map.off("zoomend",n),e({eventData:t,zoom:i})}}},$_catchRotateFabric:function(t,e,n){var r=this;return function n(o){if(o.eventId===t.eventId){var i=r.map.getBearing();r.$emit("update:bearing",i),r.map.off("rotate",n),e({eventData:t,bearing:i})}}},$_catchPitchFabric:function(t,e,n){var r=this;return function n(o){if(o.eventId===t.eventId){var i=r.map.getPitch();r.$emit("update:pitch",i),r.map.off("pitch",n),e({eventData:t,pitch:i})}}},panBy:function(t,e){var n=this,r={eventId:"panBy-"+(""+Math.random()).split(".")[1]};return 0===t[0]&&0===t[1]?new Promise(function(t,e){return t({center:n.map.getCenter()})}):new Promise(function(o,i){n.map.on("moveend",n.$_catchMoveFabric(r,o,i)),n.map.panBy(t,e,r)})},panTo:function(t,e){var n=this;t instanceof Array||(t=t.toArray());var r={eventId:"panTo-"+(""+Math.random()).split(".")[1]};return 0===t[0]&&0===t[1]?new Promise(function(t,e){return t({eventData:r,center:n.map.getCenter()})}):new Promise(function(o,i){n.map.on("moveend",n.$_catchMoveFabric(r,o,i)),n.map.panTo(t,e,r)})},zoomTo:function(t,e){var n=this,r={eventId:"zoomTo-"+(""+Math.random()).split(".")[1]};return t===this.map.getZoom()?new Promise(function(t,e){return t({eventData:r,zoom:n.map.getZoom()})}):new Promise(function(o,i){n.map.on("zoomend",n.$_catchZoomFabric(r,o,i)),n.map.zoomTo(t,e,r)})},zoomIn:function(t){var e=this;return new Promise(function(n,r){var o={eventId:"zoomIn-"+(""+Math.random()).split(".")[1]};e.map.on("zoomend",e.$_catchZoomFabric(o,n,r)),e.map.zoomIn(t,o)})},zoomOut:function(t){var e=this;return new Promise(function(n,r){var o={eventId:"zoomOut-"+(""+Math.random()).split(".")[1]};e.map.on("zoomend",e.$_catchZoomFabric(o,n,r)),e.map.zoomOut(t,o)})},rotateTo:function(t,e){var n=this;return t===this.map.getBearing()?new Promise(function(t,e){return t({bearing:n.map.getBearing()})}):new Promise(function(r,o){var i={eventId:"rotateTo-"+(""+Math.random()).split(".")[1]};n.map.on("rotate",n.$_catchRotateFabric(i,r,o)),n.map.rotateTo(t,e,i)})},resetNorth:function(t){var e=this;return new Promise(function(n,r){var o={eventId:"resetNorth-"+(""+Math.random()).split(".")[1]};e.map.on("rotate",e.$_catchRotateFabric(o,n,r)),e.map.resetNorth(t,o)})},snapToNorth:function(t){var e=this;return new Promise(function(n,r){var o={eventId:"snapToNorth-"+(""+Math.random()).split(".")[1]};e.map.on("rotate",e.$_catchRotateFabric(o,n,r)),e.map.snapToNorth(t,o)})},fitBounds:function(t,e){var n=this,r={eventId:"fitBounds-"+(""+Math.random()).split(".")[1]};if(t===this.map.getBounds())return new Promise(function(t,e){return t({eventData:r,bounds:n.map.getBounds()})});var o=new Promise(function(t,e){n.map.on("zoomend",n.$_catchZoomFabric(r,t,e))}),i=new Promise(function(t,e){n.map.on("moveend",n.$_catchMoveFabric(r,t,e))});return this.map.fitBounds(t,e,r),Promise.all([o,i]).then(function(t){return{eventData:r,bounds:n.map.getBounds()}})},jumpTo:function(t){var e=this,n={eventId:"jumpTo-"+(""+Math.random()).split(".")[1]},r=[];if(void 0!==t.bearing&&t.bearing!==this.map.getBearing()){var i=new Promise(function(t,r){e.map.on("rotate",e.$_catchRotateFabric(n,t,r))});r.push(i)}if(void 0!==t.zoom&&t.zoom!==this.map.getZoom()){var a=new Promise(function(t,r){e.map.on("zoomend",e.$_catchZoomFabric(n,t,r))});r.push(a)}if(void 0!==t.center&&t.center!==this.map.getCenter()){var s=new Promise(function(t,r){e.map.on("moveend",e.$_catchMoveFabric(n,t,r))});r.push(s)}if(void 0!==t.pitch&&t.pitch!==this.map.getPitch()){var u=new Promise(function(t,r){e.map.on("pitch",e.$_catchPitchFabric(n,t,r))});r.push(u)}return 0===r.length?new Promise(function(t,r){t({eventData:n,pitch:e.map.getPitch(),zoom:e.map.getZoom(),center:e.map.getCenter(),bearing:e.map.getBearing()})}):(this.map.jumpTo(t,n),Promise.all(r).then(function(t){var e={},r=!0,i=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value;Object.assign(e,c)}}catch(t){i=!0,a=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return o({},e,{eventData:n})}))},easeTo:function(t){var e=this,n=[],r={eventId:"easeTo-"+(""+Math.random()).split(".")[1]};if(void 0!==t.bearing&&t.bearing!==this.map.getBearing()){var i=new Promise(function(t,n){e.map.on("rotate",e.$_catchRotateFabric(r,t,n))});n.push(i)}if(void 0!==t.zoom&&t.zoom!==this.map.getZoom()){var a=new Promise(function(t,n){e.map.on("zoomend",e.$_catchZoomFabric(r,t,n))});n.push(a)}if(void 0!==t.center&&t.center!==this.map.getCenter()){var s=new Promise(function(t,n){e.map.on("moveend",e.$_catchMoveFabric(r,t,n))});n.push(s)}if(void 0!==t.pitch&&t.pitch!==this.map.getPitch()){var u=new Promise(function(t,n){e.map.on("pitch",e.$_catchPitchFabric(r,t,n))});n.push(u)}return 0===n.length?new Promise(function(t,n){t({eventData:r,pitch:e.map.getPitch(),zoom:e.map.getZoom(),center:e.map.getCenter(),bearing:e.map.getBearing()})}):(this.map.easeTo(t,r),Promise.all(n).then(function(t){var e={},n=!0,i=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var c=s.value;Object.assign(e,c)}}catch(t){i=!0,a=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return o({},e,{eventData:r})}))},flyTo:function(t){var e=this,n={eventId:"flyTo-"+(""+Math.random()).split(".")[1]},r=[];if(void 0!==t.bearing&&t.bearing!==this.map.getBearing()){var i=new Promise(function(t,r){e.map.on("rotate",e.$_catchRotateFabric(n,t,r))});r.push(i)}if(void 0!==t.zoom&&t.zoom!==this.map.getZoom()){var a=new Promise(function(t,r){e.map.on("zoomend",e.$_catchZoomFabric(n,t,r))});r.push(a)}if(void 0!==t.center&&t.center!==this.map.getCenter()){var s=new Promise(function(t,r){e.map.on("moveend",e.$_catchMoveFabric(n,t,r))});r.push(s)}if(void 0!==t.pitch&&t.pitch!==this.map.getPitch()){var u=new Promise(function(t,r){e.map.on("pitch",e.$_catchPitchFabric(n,t,r))});r.push(u)}return 0===r.length?new Promise(function(t,r){t({eventData:n,pitch:e.map.getPitch(),zoom:e.map.getZoom(),center:e.map.getCenter(),bearing:e.map.getBearing()})}):(this.map.flyTo(t,n),Promise.all(r).then(function(t){var e={},r=!0,i=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value;Object.assign(e,c)}}catch(t){i=!0,a=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return o({},e,{eventData:n})}))},stop:function(){this.map.stop();var t=[this.map.getPitch(),this.map.getZoom(),this.map.getBearing(),this.map.getCenter()],e=t[0],n=t[1],r=t[2],o=t[3];return this.$emit("update:pitch",e),this.$emit("update:zoom",n),this.$emit("update:bearing",r),this.$emit("update:center",o),Promise.resolve({pitch:e,zoom:n,bearing:r,center:o})}}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(3),s=r(a);e.default={name:"AttributionControl",mixins:[i.default,s.default],props:{compact:{type:Boolean,default:!0}},data:function(){return{control:void 0}},created:function(){this.control=new this.mapbox.AttributionControl({compact:this.compact})},methods:{$_deferredMount:function(t){this.map=t.map,this.map.addControl(this.control),this.$emit("added",this.control),t.component.$off("load",this.$_deferredMount)}}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(3),s=r(a);e.default={name:"FullscreenControl",mixins:[i.default,s.default],props:{position:{type:String,default:"top-right"}},data:function(){return{control:void 0}},created:function(){this.control=new this.mapbox.FullscreenControl},methods:{$_deferredMount:function(t){this.map=t.map,this.map.addControl(this.control,this.position),this.$emit("added",this.control),t.component.$off("load",this.$_deferredMount)}}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(3),s=r(a),u=n(36),c=r(u);e.default={name:"GeolocateControl",mixins:[i.default,s.default],props:{position:{type:String,default:"top-right"},accessToken:{type:String,default:void 0}},data:function(){return{control:void 0}},created:function(){var t=this;this.accessToken&&(this.mapbox.accessToken=this.accessToken),this.control=new c.default(this._props),this.control.on("error",function(e){t.$emit("geocoder-error",e)}),this.control.on("result",function(e){t.$emit("geocoder-result",e)})},methods:{$_deferredMount:function(t){this.map=t.map,this.map.addControl(this.control,this.position),this.$emit("added",this.control),t.component.$off("load",this.$_deferredMount)}}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(3),s=r(a);e.default={name:"GeolocateControl",mixins:[i.default,s.default],props:{position:{type:String,default:"top-right"},positionOptions:{type:Object,default:function(){return{enableHighAccuracy:!1,timeout:6e3}}},watchPosition:{type:Boolean,default:!1}},data:function(){return{control:void 0}},created:function(){var t=this;this.control=new this.mapbox.GeolocateControl(this._props),this.control.on("error",function(e){t.$emit("geolocate-error",e)}),this.control.on("geolocate",function(e){t.$emit("geolocate",e)})},methods:{$_deferredMount:function(t){this.map=t.map,this.map.addControl(this.control,this.position),this.$emit("added",this.control),t.component.$off("load",this.$_deferredMount)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n(1),i=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default={name:"MapMarker",mixins:[i.default],props:{offset:{type:[Object,Array],default:function(){return[0,0]}},coordinates:{type:Array,required:!0},element:{type:String,required:!1},color:{type:String,required:!1},anchor:{type:String,default:function(){return"center"},required:!1}},data:function(){return{marker:void 0}},mounted:function(){this.$_checkMapTree()},beforeDestroy:function(){void 0!==this.map&&void 0!==this.marker&&this.marker.remove()},watch:{coordinates:function(t){console.log(t),t instanceof Array&&(void 0).marker.setLngLat(t)}},methods:{$_deferredMount:function(t){this.$slots.marker?this.marker=new this.mapbox.Marker(this.$slots.marker[0].elm,r({},this._props)):this.marker=new this.mapbox.Marker,this.map=t.map,this.$_addMarker(),t.component.$off("load",this.$_deferredMount)},$_addMarker:function(){this.marker.setLngLat(this.coordinates).addTo(this.map),this.$_emitMapEvent("added",{marker:this.marker})},remove:function(){this.marker.remove(),this.$_emitMapEvent("removed",{marker:this.marker})},getLngLat:function(){return this.marker.getLngLat()},getPopup:function(){this.marker.getPopup()},setPopup:function(){this.marker.setPopup(this.popup)},togglePopup:function(){this.marker.togglePopup()}}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(3),s=r(a);e.default={name:"NavigationControl",mixins:[i.default,s.default],props:{position:{type:String,default:"top-right"}},data:function(){return{control:void 0}},created:function(){this.control=new this.mapbox.NavigationControl},methods:{$_deferredMount:function(t){this.map=t.map,this.map.addControl(this.control,this.position),this.$_emitMapEvent("added",{control:this.control}),t.component.$off("load",this.$_deferredMount)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n(1),i=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default={name:"Popup",mixins:[i.default],props:{closeButton:{type:Boolean,default:!0},closeOnClick:{type:Boolean,default:!0},anchor:{validator:function(t){var e=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"];return"string"==typeof t&&-1!==e.indexOf(t)||void 0===t},default:void 0},offset:{type:[Number,Object,Array],default:function(){return[0,0]}},coordinates:{type:Array},onlyText:{type:Boolean,default:!1}},data:function(){return{initial:!0,popup:void 0}},computed:{isOpen:function(){return void 0!==this.popup&&this.popup.isOpen()}},mounted:function(){this.$_checkMapTree()},beforeDestroy:function(){this.map&&(this.$_emitMapEvent("popup-removed",{popup:this.popup}),this.popup.remove())},watch:{coordinates:function(t){this.initial||this.popup.setLngLat(t)}},methods:{$_deferredMount:function(t){this.map=t.map,this.$_addPopup(),this.initial=!1,t.component.$off("load",this.$_deferredMount)},$_addPopup:function(){var t=this;if(this.popup=new this.mapbox.Popup(r({},this._props)),void 0!==this.coordinates&&this.popup.setLngLat(this.coordinates),void 0!==this.$slots.default)if(this.onlyText)if(3===this.$slots.default[0].elm.nodeType){var e=document.createElement("span");e.appendChild(this.$slots.default[0].elm),this.popup.setText(e.innerText)}else this.popup.setText(this.$slots.default[0].elm.innerText);else this.popup.setDOMContent(this.$slots.default[0].elm);this.popup.addTo(this.map),this.$_emitMapEvent("added",{popup:this.popup}),this.popup.on("close",this.$_onClose),void 0!==this.$parent.marker?this.$parent.marker.setPopup(this.popup):this.$parent.$once("added",function(e){e.marker.setPopup(t.popup)})},$_onClose:function(){this.$_emitMapEvent("close",{popup:this.popup})}}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=r(o),a=n(3),s=r(a);e.default={name:"ScaleControl",mixins:[i.default,s.default],props:{maxWidth:{type:Number,default:150},unit:{type:String,default:"metric"}},data:function(){return{control:void 0}},created:function(){this.control=new this.mapbox.ScaleControl(this._props)},methods:{$_deferredMount:function(t){this.map=t.map;try{this.map.addControl(this.control)}catch(t){console.log(t)}this.$emit("added",this.control),t.component.$off("load",this.$_deferredMount)}}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),i=r(o),a=n(4),s=r(a);e.default={name:"CanvasLayer",mixins:[s.default],props:{coordinates:{type:Array,required:!0},animate:{type:Boolean,default:!0}},data:function(){return{source:void 0}},mounted:function(){if("canvas"!==this.$slots.default[0].tag)throw new Error('Error in map layer component with source id "'+this.sourceId+'" and layer id "'+this.layerId+'"\n        You need to add canvas element as child of canvas layer.');this.$_checkMapTree()},computed:{canvas:function(){return this.map.getSource(this.sourceId).getCanvas()}},watch:{minzoom:function(t){this.initial||this.map.setLayerZoomRange(this.layerId,t,this.maxzoom)},maxzoom:function(t){this.initial||this.map.setLayerZoomRange(this.layerId,this.minzoom,t)},coordinates:function(t){this.initial||this.source.setCoordinates(t)}},methods:{$_deferredMount:function(t){var e={type:"canvas",coordinates:this.coordinates,animate:this.animate,canvas:this.$slots.default[0].data.attrs.id};this.map=t.map,this.map.on("dataloading",this.$_watchSourceLoading);try{this.map.addSource(this.sourceId,e)}catch(t){this.replaceSource?(this.map.removeSource(this.sourceId),this.map.addSource(this.sourceId,e)):this.$_emitMapEvent("layer-source-error",{sourceId:this.sourceId,error:t})}this.source=this.map.getSource(this.sourceId),this.$_addLayer(),this.listenUserEvents&&this.$_bindEvents(i.default),t.component.$off("load",this.$_deferredMount),this.initial=!1},$_addLayer:function(){var t=this.map.getLayer(this.layerId);if(t){if(!this.replace)return this.$_emitMapEvent("layer-exists",{layerId:this.layerId}),t;this.map.removeLayer(this.layerId)}var e={id:this.layerId,source:this.sourceId,type:"raster"};this.refLayer?e.ref=this.refLayer:(this["source-layer"]&&(e["source-layer"]=this["source-layer"]),this.minzoom&&(e.minzoom=this.minzoom),this.maxzoom&&(e.maxzoom=this.maxzoom)),e.paint=this.paint?this.paint:{"raster-opacity":.85},e.metadata=this.metadata,this.map.addLayer(e,this.before),this.$_emitMapEvent("added",{layerId:this.layerId})}}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),i=r(o),a=n(4),s=r(a);e.default={name:"GeojsonLayer",mixins:[s.default],props:{source:{type:[Object,String]},type:{validator:function(t){var e=["fill","line","symbol","circle","fill-extrusion","raster","background"];return"string"==typeof t&&-1!==e.indexOf(t)||void 0===t},default:"fill"},filter:{type:Array,default:void 0}},watch:{source:function(t){this.initial||this.map.getSource(this.sourceId).setData(t)},filter:function(t){this.initial||this.map.setFilter(this.layerId,t)}},methods:{$_deferredMount:function(t){if(this.map=t.map,this.map.on("dataloading",this.$_watchSourceLoading),this.source)try{this.map.addSource(this.sourceId,{type:"geojson",data:this.source})}catch(t){this.replaceSource?(this.map.removeSource(this.sourceId),this.map.addSource(this.sourceId,{type:"geojson",data:this.source})):this.$_emitMapEvent("layer-source-error",{sourceId:this.sourceId,error:t})}this._addLayer(),this.listenUserEvents&&this.$_bindEvents(i.default),this.map.off("dataloading",this.$_watchSourceLoading),this.initial=!1,t.component.$off("load",this.$_deferredMount)},_addLayer:function(){var t=this.map.getLayer(this.layerId);if(t){if(!this.replace)return this.$_emitMapEvent("layer-exists",{layerId:this.layerId}),t;this.map.removeLayer(this.layerId)}var e={id:this.layerId,source:this.sourceId};this.refLayer?e.ref=this.refLayer:(e.type=this.type?this.type:"fill",e.source=this.sourceId,this["source-layer"]&&(e["source-layer"]=this["source-layer"]),this.minzoom&&(e.minzoom=this.minzoom),this.maxzoom&&(e.maxzoom=this.maxzoom),this.layout&&(e.layout=this.layout),this.filter&&(e.filter=this.filter)),e.paint=this.paint?this.paint:{"fill-color":"rgba("+3*this.layerId.length*12+",153,80,0.55)"},e.metadata=this.metadata,this.map.addLayer(e,this.before),this.$_emitMapEvent("added",{layerId:this.layerId})}}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),i=r(o),a=n(5),s=r(a);e.default={name:"ImageLayer",mixins:[i.default],props:{coordinates:{type:Array,required:!0},url:{type:String,required:!0}},data:function(){return{source:void 0}},watch:{coordinates:function(t){this.initial||this.source.setCoordinates(t)}},methods:{$_deferredMount:function(t){var e={type:"image",url:this.url,coordinates:this.coordinates};this.map=t.map,this.map.on("dataloading",this.$_watchSourceLoading);try{this.map.addSource(this.sourceId,e)}catch(t){this.replaceSource?(this.map.removeSource(this.sourceId),this.map.addSource(this.sourceId,e)):this.$_emitMapEvent("layer-source-error",{sourceId:this.sourceId,error:t})}this.source=this.map.getSource(this.sourceId),this.$_addLayer(),this.listenUserEvents&&this.$_bindEvents(s.default),this.initial=!1,t.component.$off("load",this.$_deferredMount)},$_addLayer:function(){var t=this.map.getLayer(this.layerId);if(t){if(!this.replace)return this._emitMapEvent("layer-exists",{layerId:this.layerId}),t;this.map.removeLayer(this.layerId)}var e={id:this.layerId,source:this.sourceId,type:"raster"};this.refLayer?e.ref=this.refLayer:(this["source-layer"]&&(e["source-layer"]=this["source-layer"]),this.minzoom&&(e.minzoom=this.minzoom),this.maxzoom&&(e.maxzoom=this.maxzoom),this.layout&&(e.layout=this.layout),this.filter&&(e.filter=this.filter)),e.paint=this.paint?this.paint:{"raster-opacity":1},e.metadata=this.metadata,this.map.addLayer(e,this.before),this.$_emitMapEvent("added",{layerId:this.layerId})}}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),i=r(o),a=n(4),s=r(a);e.default={name:"VectorLayer",mixins:[s.default],props:{url:{type:String,default:void 0},tiles:{type:Array,default:function(){return[]}},tilesMinZoom:{type:Number,default:void 0},tilesMaxZoom:{type:Number,default:void 0},filter:{type:Array,default:void 0}},watch:{filter:function(t){this.initial||this.map.setFilter(this.layerId,t)}},methods:{$_deferredMount:function(t){if(t.mapId===this.mapId){this.map=t.map;var e={type:"vector",tilesMinZoom:this.tilesMinZoom,tilesMaxZoom:this.tilesMaxZoom,url:this.url,tiles:this.tiles};this.map.on("dataloading",this.$_watchSourceLoading);try{this.map.addSource(this.sourceId,e)}catch(t){this.replaceSource?(this.map.removeSource(this.sourceId),this.map.addSource(this.sourceId,e)):this.$_emitMapEvent("layer-source-error",{sourceId:this.sourceId,error:t})}this._addLayer(),this.listenUserEvents&&this.$_bindEvents(i.default),this.map.off("dataloading",this.$_watchSourceLoading),this.initial=!1,t.mapComponent.$on("load",this.$_deferredMount)}},_addLayer:function(){var t=this.map.getLayer(this.layerId);if(t){if(!this.replace)return this.$_emitMapEvent("layer-exists",{layerId:this.layerId}),t;this.map.removeLayer(this.layerId)}var e={id:this.layerId,source:this.sourceId};this.refLayer?e.ref=this.refLayer:(e.type=this.type?this.type:"fill",e.source=this.sourceId,e["source-layer"]=this["source-layer"],this.minzoom&&(e.minzoom=this.minzoom),this.maxzoom&&(e.maxzoom=this.maxzoom),this.layout&&(e.layout=this.layout),this.filter&&(e.filter=this.filter)),e.paint=this.paint?this.paint:{"fill-color":"rgba("+3*this.layerId.length*12+",153,80,0.55)"},e.metadata=this.metadata,this.map.addLayer(e,this.before),this.$_emitMapEvent("added",{layerId:this.layerId})}}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),i=r(o),a=n(4),s=r(a);e.default={name:"VideoLayer",mixins:[s.default],props:{coordinates:{type:Array,required:!0},urls:{type:Array,required:!0}},data:function(){return{source:void 0}},computed:{video:function(){return this.map.getSource(this.sourceId).getVideo()}},watch:{coordinates:function(t){this.initial||this.source.setCoordinates(t)}},methods:{_deferredMount:function(t){var e={type:"video",urls:this.urls,coordinates:this.coordinates};this.map=t.map,this.map.on("dataloading",this.$_watchSourceLoading);try{this.map.addSource(this.sourceId,e)}catch(t){this.replaceSource?(this.map.removeSource(this.sourceId),this.map.addSource(this.sourceId,e)):this.$_emitMapEvent("layer-source-error",{sourceId:this.sourceId,error:t})}this.source=this.map.getSource(this.sourceId),this.$_addLayer(),this.listenUserEvents&&this.$_bindEvents(i.default),this.initial=!1,t.component.$off("load",this.$_deferredMount)},$_addLayer:function(){var t=this.map.getLayer(this.layerId);if(t){if(!this.replace)return this.$_emitMapEvent("layer-exists",{layerId:this.layerId}),t;this.map.removeLayer(this.layerId)}var e={id:this.layerId,source:this.sourceId,type:"background"};this.refLayer?e.ref=this.refLayer:(this["source-layer"]&&(e["source-layer"]=this["source-layer"]),this.minzoom&&(e.minzoom=this.minzoom),this.maxzoom&&(e.maxzoom=this.maxzoom)),e.metadata=this.metadata,this.map.addLayer(e,this.before),this.$_emitMapEvent("added",{layerId:this.layerId})}}}},function(t,e,n){(function(e,n){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.4+314e4831
 */
!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function r(t){return"function"==typeof t}function o(t){D=t}function i(t){U=t}function a(){return void 0!==B?function(){B(u)}:s()}function s(){var t=setTimeout;return function(){return t(u,1)}}function u(){for(var t=0;t<q;t+=2){(0,K[t])(K[t+1]),K[t]=void 0,K[t+1]=void 0}q=0}function c(t,e){var n=this,r=new this.constructor(h);void 0===r[Y]&&L(r);var o=n._state;if(o){var i=arguments[o-1];U(function(){return C(o,r,i,n._result)})}else E(n,r,t,e);return r}function l(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(h);return b(n,t),n}function h(){}function p(){return new TypeError("You cannot resolve a promise with itself")}function f(){return new TypeError("A promises callback cannot return that same promise.")}function d(t){try{return t.then}catch(t){return tt.error=t,tt}}function m(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}function v(t,e,n){U(function(t){var r=!1,o=m(n,e,function(n){r||(r=!0,e!==n?b(t,n):x(t,n))},function(e){r||(r=!0,w(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,w(t,o))},t)}function y(t,e){e._state===X?x(t,e._result):e._state===J?w(t,e._result):E(e,void 0,function(e){return b(t,e)},function(e){return w(t,e)})}function g(t,e,n){e.constructor===t.constructor&&n===c&&e.constructor.resolve===l?y(t,e):n===tt?(w(t,tt.error),tt.error=null):void 0===n?x(t,e):r(n)?v(t,e,n):x(t,e)}function b(e,n){e===n?w(e,p()):t(n)?g(e,n,d(n)):x(e,n)}function _(t){t._onerror&&t._onerror(t._result),$(t)}function x(t,e){t._state===W&&(t._result=e,t._state=X,0!==t._subscribers.length&&U($,t))}function w(t,e){t._state===W&&(t._state=J,t._result=e,U(_,t))}function E(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+X]=n,o[i+J]=r,0===i&&t._state&&U($,t)}function $(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,a=0;a<e.length;a+=3)r=e[a],o=e[a+n],r?C(n,r,o,i):o(i);t._subscribers.length=0}}function M(t,e){try{return t(e)}catch(t){return tt.error=t,tt}}function C(t,e,n,o){var i=r(n),a=void 0,s=void 0,u=void 0,c=void 0;if(i){if(a=M(n,o),a===tt?(c=!0,s=a.error,a.error=null):u=!0,e===a)return void w(e,f())}else a=o,u=!0;e._state!==W||(i&&u?b(e,a):c?w(e,s):t===X?x(e,a):t===J&&w(e,a))}function I(t,e){try{e(function(e){b(t,e)},function(e){w(t,e)})}catch(e){w(t,e)}}function j(){return et++}function L(t){t[Y]=et++,t._state=void 0,t._result=void 0,t._subscribers=[]}function P(){return new Error("Array Methods must be provided an Array")}function A(t){return new nt(this,t).promise}function O(t){var e=this;return new e(R(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function k(t){var e=this,n=new e(h);return w(n,t),n}function S(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function T(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(){var t=void 0;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=rt}var F=void 0;F=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var R=F,q=0,B=void 0,D=void 0,U=function(t,e){K[q]=t,K[q+1]=e,2===(q+=2)&&(D?D(u):H())},N="undefined"!=typeof window?window:void 0,Z=N||{},V=Z.MutationObserver||Z.WebKitMutationObserver,G="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),Q="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,K=new Array(1e3),H=void 0;H=G?function(){return function(){return e.nextTick(u)}}():V?function(){var t=0,e=new V(u),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():Q?function(){var t=new MessageChannel;return t.port1.onmessage=u,function(){return t.port2.postMessage(0)}}():void 0===N?function(){try{var t=Function("return this")().require("vertx");return B=t.runOnLoop||t.runOnContext,a()}catch(t){return s()}}():s();var Y=Math.random().toString(36).substring(2),W=void 0,X=1,J=2,tt={error:null},et=0,nt=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(h),this.promise[Y]||L(this.promise),R(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?x(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&x(this.promise,this._result))):w(this.promise,P())}return t.prototype._enumerate=function(t){for(var e=0;this._state===W&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===l){var o=d(t);if(o===c&&t._state!==W)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===rt){var i=new n(h);g(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===W&&(this._remaining--,t===J?w(r,n):this._result[e]=n),0===this._remaining&&x(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;E(t,void 0,function(t){return n._settledAt(X,e,t)},function(t){return n._settledAt(J,e,t)})},t}(),rt=function(){function t(e){this[Y]=j(),this._result=this._state=void 0,this._subscribers=[],h!==e&&("function"!=typeof e&&S(),this instanceof t?I(this,e):T())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var e=this,n=e.constructor;return e.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})})},t}();return rt.prototype.then=c,rt.all=A,rt.race=O,rt.resolve=l,rt.reject=k,rt._setScheduler=o,rt._setAsap=i,rt._asap=U,rt.polyfill=z,rt.Promise=rt,rt})}).call(e,n(102),n(10))},function(t,e,n){!function(){var e={};t.exports=e,e.simpleFilter=function(t,n){return n.filter(function(n){return e.test(t,n)})},e.test=function(t,n){return null!==e.match(t,n)},e.match=function(t,e,n){n=n||{};var r,o=0,i=[],a=e.length,s=0,u=0,c=n.pre||"",l=n.post||"",h=n.caseSensitive&&e||e.toLowerCase();t=n.caseSensitive&&t||t.toLowerCase();for(var p=0;p<a;p++)r=e[p],h[p]===t[o]?(r=c+r+l,o+=1,u+=1+u):u=0,s+=u,i[i.length]=r;return o===t.length?(s=h===t?1/0:s,{rendered:i.join(""),score:s}):null},e.filter=function(t,n,r){return n&&0!==n.length?"string"!=typeof t?n:(r=r||{},n.reduce(function(n,o,i,a){var s=o;r.extract&&(s=r.extract(o));var u=e.match(t,s,r);return null!=u&&(n[n.length]={string:u.rendered,score:u.score,index:i,original:o}),n},[]).sort(function(t,e){var n=e.score-t.score;return n||t.index-e.index})):[]}}()},function(t,e,n){(function(e){function n(t,e,n){function o(e){var n=m,r=v;return m=v=void 0,$=e,g=t.apply(r,n)}function i(t){return $=t,b=setTimeout(l,e),M?o(t):g}function u(t){var n=t-E,r=t-$,o=e-n;return C?x(o,y-r):o}function c(t){var n=t-E,r=t-$;return void 0===E||n>=e||n<0||C&&r>=y}function l(){var t=w();if(c(t))return h(t);b=setTimeout(l,u(t))}function h(t){return b=void 0,I&&m?o(t):(m=v=void 0,g)}function p(){void 0!==b&&clearTimeout(b),$=0,m=E=v=b=void 0}function f(){return void 0===b?g:h(w())}function d(){var t=w(),n=c(t);if(m=arguments,v=this,E=t,n){if(void 0===b)return i(E);if(C)return b=setTimeout(l,e),o(E)}return void 0===b&&(b=setTimeout(l,e)),g}var m,v,y,g,b,E,$=0,M=!1,C=!1,I=!0;if("function"!=typeof t)throw new TypeError(s);return e=a(e)||0,r(n)&&(M=!!n.leading,C="maxWait"in n,y=C?_(a(n.maxWait)||0,e):y,I="trailing"in n?!!n.trailing:I),d.cancel=p,d.flush=f,d}function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function o(t){return!!t&&"object"==typeof t}function i(t){return"symbol"==typeof t||o(t)&&b.call(t)==c}function a(t){if("number"==typeof t)return t;if(i(t))return u;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(l,"");var n=p.test(t);return n||f.test(t)?d(t.slice(2),n?2:8):h.test(t)?u:+t}var s="Expected a function",u=NaN,c="[object Symbol]",l=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,f=/^0o[0-7]+$/i,d=parseInt,m="object"==typeof e&&e&&e.Object===Object&&e,v="object"==typeof self&&self&&self.Object===Object&&self,y=m||v||Function("return this")(),g=Object.prototype,b=g.toString,_=Math.max,x=Math.min,w=function(){return y.Date.now()};t.exports=n}).call(e,n(10))},function(t,e,n){"use strict";n(7);var r=n(2),o=r({success:function(t){var e=t&&t.callback;return"function"==typeof e&&e(null,t.entity,t),t},error:function(t){var e=t&&t.callback;if("function"==typeof e){var n=t.error||t.entity;"object"!=typeof n&&(n=new Error(n)),e(n)}return t}});t.exports=o},function(t,e,n){"use strict";n(7);var r=n(67);t.exports=function(t){return r.wrap(n(70)).wrap(n(13),{prefix:t.endpoint}).wrap(n(71),{mime:"application/json"}).wrap(n(14)).wrap(n(69),{params:{access_token:t.accessToken}}).wrap(n(63),{access_token:t.accessToken}).wrap(n(65)).wrap(n(58))}},function(t,e){t.exports.DEFAULT_ENDPOINT="https://api.mapbox.com"},function(t,e,n){"use strict";function r(t){var e=t.split(".")[1];if(!e)return null;e=e.replace(/-/g,"+").replace(/_/g,"/");var n=e.length%4;if(2===n&&(e+="=="),3===n&&(e+="="),1===n||n>3)return null;try{return JSON.parse(o.decode(e)).u}catch(t){return null}}var o=n(78);t.exports=r},function(t,e,n){"use strict";function r(t){function e(e,n){this.name=t,o("string"==typeof e,"accessToken required to instantiate Mapbox client");var r=i.DEFAULT_ENDPOINT;void 0!==n&&(o("object"==typeof n,"options must be an object"),n.endpoint&&(o("string"==typeof n.endpoint,"endpoint must be a string"),r=n.endpoint),n.account&&(o("string"==typeof n.account,"account must be a string"),this.owner=n.account)),this.client=a({endpoint:r,accessToken:e}),this.accessToken=e,this.endpoint=r,this.owner=this.owner||s(e),o(!!this.owner,"could not determine account from provided accessToken")}return e}var o=n(11),i=n(60),a=n(59),s=n(61);t.exports=r},function(t,e,n){"use strict";n(7);var r=n(2),o=n(77),i=n(106),a=n(20),s=r({success:function(t,e){var n=t&&t.headers&&t.headers.Link,r=t&&t.request&&t.request.originator;if(n){var s=o.parse(n).filter(function(t){return"next"===t.rel})[0];s&&(t.nextPage=function(t){var n=i.parse(s.href),o=a.parse(n.query);return o.access_token=o.access_token||e.access_token,n.search=a.stringify(o),r({path:i.format(n),callback:t})})}return t}});t.exports=s},function(t,e,n){"use strict";function r(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}var o=n(11),i=n(62),a=i("MapboxGeocoding");a.prototype.geocodeForward=function(t,e,n){if(void 0===n&&"function"==typeof e&&(n=e,e={}),Array.isArray(t)){if("mapbox.places-permanent"!==e.dataset)throw new Error("Batch geocoding is only available with the mapbox.places-permanent endpoint. See https://mapbox.com/api-documentation/#batch-requests for details");t=t.join(";")}o("string"==typeof t,"query must be a string"),o("object"==typeof e,"options must be an object");var i={query:t,dataset:"mapbox.places"},a=3;return e.precision&&(o("number"==typeof e.precision,"precision option must be number"),a=e.precision),e.proximity&&(o("number"==typeof e.proximity.latitude&&"number"==typeof e.proximity.longitude,"proximity must be an object with numeric latitude & longitude properties"),i.proximity=r(e.proximity.longitude,a)+","+r(e.proximity.latitude,a)),e.bbox&&(o("number"==typeof e.bbox[0]&&"number"==typeof e.bbox[1]&&"number"==typeof e.bbox[2]&&"number"==typeof e.bbox[3]&&4===e.bbox.length,"bbox must be an array with numeric values in the form [minX, minY, maxX, maxY]"),i.bbox=e.bbox[0]+","+e.bbox[1]+","+e.bbox[2]+","+e.bbox[3]),e.limit&&(o("number"==typeof e.limit,"limit must be a number"),i.limit=e.limit),e.dataset&&(o("string"==typeof e.dataset,"dataset option must be string"),i.dataset=e.dataset),e.country&&(o("string"==typeof e.country,"country option must be string"),i.country=e.country),e.language&&(o("string"==typeof e.language,"language option must be string"),i.language=e.language),e.types&&(o("string"==typeof e.types,"types option must be string"),i.types=e.types),"boolean"==typeof e.autocomplete&&(o("boolean"==typeof e.autocomplete,"autocomplete must be a boolean"),i.autocomplete=e.autocomplete),this.client({path:"/geocoding/v5/{dataset}/{query}.json{?access_token,proximity,country,types,bbox,limit,autocomplete,language}",params:i,callback:n})},a.prototype.geocodeReverse=function(t,e,n){void 0===n&&"function"==typeof e&&(n=e,e={}),o("object"==typeof t,"location must be an object"),o("object"==typeof e,"options must be an object"),o("number"==typeof t.latitude&&"number"==typeof t.longitude,"location must be an object with numeric latitude & longitude properties");var i={dataset:"mapbox.places"};e.dataset&&(o("string"==typeof e.dataset,"dataset option must be string"),i.dataset=e.dataset);var a=5;return e.precision&&(o("number"==typeof e.precision,"precision option must be number"),a=e.precision),e.language&&(o("string"==typeof e.language,"language option must be string"),i.language=e.language),e.types&&(o("string"==typeof e.types,"types option must be string"),i.types=e.types),e.limit&&(o("number"==typeof e.limit,"limit option must be a number"),o(1===e.types.split(",").length,"a single type must be specified to use the limit option"),i.limit=e.limit),i.longitude=r(t.longitude,a),i.latitude=r(t.latitude,a),this.client({path:"/geocoding/v5/{dataset}/{longitude},{latitude}.json{?access_token,types,limit,language}",params:i,callback:n})},t.exports=a},function(t,e,n){function r(t){return{url:t.url,status:t.status&&t.status.code,headers:t.headers,entity:t.entity,error:t.error,callback:t.request&&t.request.callback,nextPage:t.nextPage}}var o=n(2),i=o({response:r});t.exports=i},function(t,e,n){"use strict";function r(t,e){var n,r,o,i,a;if(n=t,o={},e){for(r in e)a=new RegExp("\\{"+r+"\\}"),a.test(n)?n=n.replace(a,encodeURIComponent(e[r]),"g"):o[r]=e[r];i=s.write(o),i&&(n+=-1===n.indexOf("?")?"?":"&",n+=i)}return n}function o(t,e){return 0===t.indexOf(e)}function i(t,e){if(!(this instanceof i))return new i(t,e);t instanceof i?(this._template=t.template,this._params=a({},this._params,e)):(this._template=(t||"").toString(),this._params=e||{})}/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
var a,s,u,c,l,h;a=n(6),s=n(16),c=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?(\/[^?#]*)?(\?[^#]*)?(#\S*)?/i,l=/^([a-z][a-z0-9\-\+\.]*:\/\/|\/)/i,h=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?\//i,i.prototype={append:function(t,e){return new i(this._template+t,a({},this._params,e))},fullyQualify:function(){if("undefined"==typeof location)return this;if(this.isFullyQualified())return this;var t=this._template;return o(t,"//")?t=u.protocol+t:o(t,"/")?t=u.origin+t:this.isAbsolute()||(t=u.origin+u.pathname.substring(0,u.pathname.lastIndexOf("/")+1)),-1===t.indexOf("/",8)&&(t+="/"),new i(t,this._params)},isAbsolute:function(){return l.test(this.build())},isFullyQualified:function(){return h.test(this.build())},isCrossOrigin:function(){if(!u)return!0;var t=this.parts();return t.protocol!==u.protocol||t.hostname!==u.hostname||t.port!==u.port},parts:function(){var t,e;return t=this.fullyQualify().build().match(c),e={href:t[0],protocol:t[1],host:t[3]||"",hostname:t[4]||"",port:t[6],pathname:t[7]||"",search:t[8]||"",hash:t[9]||""},e.origin=e.protocol+"//"+e.host,e.port=e.port||("https:"===e.protocol?"443":"http:"===e.protocol?"80":""),e},build:function(t){return r(this._template,a({},this._params,t))},toString:function(){return this.build()}},u="undefined"!=typeof location?new i(location.href).parts():void 0,t.exports=i},function(t,e,n){"use strict";/*
 * Copyright 2014-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
var r=n(12),o=n(68);r.setPlatformDefaultClient(o),t.exports=r},function(t,e,n){"use strict";function r(t){var e={};return t?(t.trim().split(u).forEach(function(t){var n,r,o;n=t.indexOf(":"),r=i(t.substring(0,n).trim()),o=t.substring(n+1).trim(),e[r]?Array.isArray(e[r])?e[r].push(o):e[r]=[e[r],o]:e[r]=o}),e):e}function o(t,e){return Object.keys(e||{}).forEach(function(n){if(e.hasOwnProperty(n)&&n in t)try{t[n]=e[n]}catch(t){}}),t}/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
var i,a,s,u;i=n(18),a=n(9),s=n(8),u=/[\r|\n]+/,t.exports=s(function(t){return a.promise(function(e,n){var i,a,s,u,c,l,h,p;if(t="string"==typeof t?{path:t}:t||{},h={request:t},t.canceled)return h.error="precanceled",void n(h);if(!(p=t.engine||XMLHttpRequest))return void n({request:t,error:"xhr-not-available"});c=t.entity,t.method=t.method||(c?"POST":"GET"),a=t.method,s=h.url=t.path||"";try{i=h.raw=new p,o(i,t.mixin),i.open(a,s,!0),o(i,t.mixin),u=t.headers;for(l in u)"Content-Type"===l&&"multipart/form-data"===u[l]||i.setRequestHeader(l,u[l]);t.canceled=!1,t.cancel=function(){t.canceled=!0,i.abort(),n(h)},i.onreadystatechange=function(){t.canceled||i.readyState===(p.DONE||4)&&(h.status={code:i.status,text:i.statusText},h.headers=r(i.getAllResponseHeaders()),h.entity=i.responseText,1223===h.status.code&&(h.status.code=204),h.status.code>0?e(h):setTimeout(function(){e(h)},0))};try{i.onerror=function(){h.error="loaderror",n(h)}}catch(t){}i.send(c)}catch(t){h.error="loaderror",n(h)}})})},function(t,e,n){"use strict";/*
 * Copyright 2013-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
var r,o,i;r=n(2),o=n(6),i=function(){function t(t,e,n){(t in e||t in n)&&(e[t]=o({},n[t],e[t]))}function e(t,e,n){t in n&&!(t in e)&&(e[t]=n[t])}var n={method:e,path:e,params:t,headers:t,entity:e,mixin:t};return function(t,e){for(var r in n)n[r](r,t,e);return t}}(),t.exports=r({request:function(t,e){return i(t,e)}})},function(t,e,n){"use strict";/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
var r;r=n(2),t.exports=r({init:function(t){return t.code=t.code||400,t},response:function(t,e){return t.status&&t.status.code>=e.code?Promise.reject(t):t}})},function(t,e,n){"use strict";/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
var r,o,i,a,s,u;r=n(2),o=n(15),i=n(72),u=n(17),a={read:function(t){return t},write:function(t){return t}},s={read:function(){throw"No read method found on converter"},write:function(){throw"No write method found on converter"}},t.exports=r({init:function(t){return t.registry=t.registry||i,t},request:function(t,e){var n,r;return r=t.headers||(t.headers={}),n=o.parse(r["Content-Type"]||e.mime||"text/plain"),r.Accept=r.Accept||e.accept||n.raw+", application/json;q=0.8, text/plain;q=0.5, */*;q=0.2","entity"in t?(r["Content-Type"]=n.raw,e.registry.lookup(n).catch(function(){if(e.permissive)return a;throw"mime-unknown"}).then(function(r){var o=e.client||t.originator,i=r.write||s.write;return u(i.bind(void 0,t.entity,{client:o,request:t,mime:n,registry:e.registry})).catch(function(){throw"mime-serialization"}).then(function(e){return t.entity=e,t})})):t},response:function(t,e){if(!(t.headers&&t.headers["Content-Type"]&&t.entity))return t;var n=o.parse(t.headers["Content-Type"]);return e.registry.lookup(n).catch(function(){return a}).then(function(r){var o=e.client||t.request&&t.request.originator,i=r.read||s.read;return u(i.bind(void 0,t.entity,{client:o,response:t,mime:n,registry:e.registry})).catch(function(e){throw t.error="mime-deserialization",t.cause=e,t}).then(function(e){return t.entity=e,t})})}})},function(t,e,n){"use strict";function r(t){this.lookup=function(e){var n;return n="string"==typeof e?o.parse(e):e,t[n.raw]?t[n.raw]:t[n.type+n.suffix]?t[n.type+n.suffix]:t[n.type]?t[n.type]:t[n.suffix]?t[n.suffix]:Promise.reject(new Error('Unable to locate converter for mime "'+n.raw+'"'))},this.delegate=function(t){return{read:function(){var e=arguments;return this.lookup(t).then(function(t){return t.read.apply(this,e)}.bind(this))}.bind(this),write:function(){var e=arguments;return this.lookup(t).then(function(t){return t.write.apply(this,e)}.bind(this))}.bind(this)}},this.register=function(e,n){return t[e]=Promise.resolve(n),t[e]},this.child=function(){return new r(Object.create(t))}}/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
var o,i;o=n(15),i=new r({}),i.register("application/hal",n(73)),i.register("application/json",n(74)),i.register("application/x-www-form-urlencoded",n(16)),i.register("multipart/form-data",n(75)),i.register("text/plain",n(76)),i.register("+json",i.delegate("application/json")),t.exports=i},function(t,e,n){"use strict";function r(t,e,n){Object.defineProperty(t,e,{value:n,configurable:!0,enumerable:!1,writeable:!0})}/*
 * Copyright 2013-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
var o,i,a,s,u;o=n(13),i=n(14),a=n(79),s=n(80),u=n(9),t.exports={read:function(t,e){function n(t,e){(e&&l&&l.warn||l.log)&&(l.warn||l.log).call(l,"Relationship '"+t+"' is deprecated, see "+e)}var c,l;return e=e||{},c=e.client,l=e.console||l,e.registry.lookup(e.mime.suffix).then(function(n){return n.read(t,e)}).then(function(t){return a.findProperties(t,"_embedded",function(t,e,n){Object.keys(t).forEach(function(n){if(!(n in e)){var o=u({entity:t[n]});r(e,n,o)}}),r(e,n,t)}),a.findProperties(t,"_links",function(t,e,a){Object.keys(t).forEach(function(o){var a=t[o];o in e||r(e,o,u.make(s(function(){return a.deprecation&&n(o,a.deprecation),!0===a.templated?i(c)({path:a.href}):c({path:a.href})})))}),r(e,a,t),r(e,"clientFor",function(e,r){var a=t[e];if(!a)throw new Error("Unknown relationship: "+e);return a.deprecation&&n(e,a.deprecation),!0===a.templated?i(r||c,{template:a.href}):o(r||c,{prefix:a.href})}),r(e,"requestFor",function(t,e,n){return this.clientFor(t,n)(e)})}),t})},write:function(t,e){return e.registry.lookup(e.mime.suffix).then(function(n){return n.write(t,e)})}}},function(t,e,n){"use strict";/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
function r(t,e){return{read:function(e){return JSON.parse(e,t)},write:function(t){return JSON.stringify(t,e)},extend:r}}t.exports=r()},function(t,e,n){"use strict";/*
 * Copyright 2014-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Michael Jackson
 */
function r(t){return t&&1===t.nodeType&&"FORM"===t.tagName}function o(t){var e,n=new FormData;for(var r in t)t.hasOwnProperty(r)&&(e=t[r],e instanceof File?n.append(r,e,e.name):e instanceof Blob?n.append(r,e):n.append(r,String(e)));return n}t.exports={write:function(t){if("undefined"==typeof FormData)throw new Error("The multipart/form-data mime serializer requires FormData support");if(t instanceof FormData)return t;if(r(t))return new FormData(t);if("object"==typeof t&&null!==t)return o(t);throw new Error("Unable to create FormData from object "+t)}}},function(t,e,n){"use strict";/*
 * Copyright 2012-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
t.exports={read:function(t){return t},write:function(t){return t.toString()}}},function(t,e){t.exports=function(){function t(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var e={parse:function(e,n){function r(t){C<j||(C>j&&(j=C,L=[]),L.push(t))}function o(){var t,n,o,a,s,u,c,l,h;for(u=C,c=C,t=[],l=C,h=C,n=i(),null!==n?(o=f(),null!==o?(44===e.charCodeAt(C)?(a=",",C++):(a=null,0===I&&r('","')),null!==a?(s=f(),null!==s?n=[n,o,a,s]:(n=null,C=h)):(n=null,C=h)):(n=null,C=h)):(n=null,C=h),null!==n&&(n=function(t,e){return e}(0,n[0])),null===n&&(C=l);null!==n;)t.push(n),l=C,h=C,n=i(),null!==n?(o=f(),null!==o?(44===e.charCodeAt(C)?(a=",",C++):(a=null,0===I&&r('","')),null!==a?(s=f(),null!==s?n=[n,o,a,s]:(n=null,C=h)):(n=null,C=h)):(n=null,C=h)):(n=null,C=h),null!==n&&(n=function(t,e){return e}(0,n[0])),null===n&&(C=l);return null!==t?(n=i(),null!==n?t=[t,n]:(t=null,C=c)):(t=null,C=c),null!==t&&(t=function(t,e,n){return e.concat([n])}(0,t[0],t[1])),null===t&&(C=u),t}function i(){var t,n,o,i,u,c,l,h;if(l=C,h=C,60===e.charCodeAt(C)?(t="<",C++):(t=null,0===I&&r('"<"')),null!==t)if(null!==(n=s()))if(62===e.charCodeAt(C)?(o=">",C++):(o=null,0===I&&r('">"')),null!==o)if(null!==(i=f())){for(u=[],c=a();null!==c;)u.push(c),c=a();null!==u?t=[t,n,o,i,u]:(t=null,C=h)}else t=null,C=h;else t=null,C=h;else t=null,C=h;else t=null,C=h;return null!==t&&(t=function(t,e,n){var r={};return n.forEach(function(t){r[t[0]]=t[1]}),r.href=e,r}(0,t[1],t[4])),null===t&&(C=l),t}function a(){var t,n,o,i,a,s;return a=C,s=C,59===e.charCodeAt(C)?(t=";",C++):(t=null,0===I&&r('";"')),null!==t?(n=f(),null!==n?(o=u(),null!==o?(i=f(),null!==i?t=[t,n,o,i]:(t=null,C=s)):(t=null,C=s)):(t=null,C=s)):(t=null,C=s),null!==t&&(t=function(t,e){return e}(0,t[2])),null===t&&(C=a),t}function s(){var t,n,o;if(o=C,/^[^>]/.test(e.charAt(C))?(n=e.charAt(C),C++):(n=null,0===I&&r("[^>]")),null!==n)for(t=[];null!==n;)t.push(n),/^[^>]/.test(e.charAt(C))?(n=e.charAt(C),C++):(n=null,0===I&&r("[^>]"));else t=null;return null!==t&&(t=function(t,e){return e.join("")}(0,t)),null===t&&(C=o),t}function u(){var t,e,n,r;return n=C,r=C,t=c(),null!==t?(e=l(),e=null!==e?e:"",null!==e?t=[t,e]:(t=null,C=r)):(t=null,C=r),null!==t&&(t=function(t,e,n){return[e,n]}(0,t[0],t[1])),null===t&&(C=n),t}function c(){var t,n,o;if(o=C,/^[a-z]/.test(e.charAt(C))?(n=e.charAt(C),C++):(n=null,0===I&&r("[a-z]")),null!==n)for(t=[];null!==n;)t.push(n),/^[a-z]/.test(e.charAt(C))?(n=e.charAt(C),C++):(n=null,0===I&&r("[a-z]"));else t=null;return null!==t&&(t=function(t,e){return e.join("")}(0,t)),null===t&&(C=o),t}function l(){var t,n,o,i;return o=C,i=C,61===e.charCodeAt(C)?(t="=",C++):(t=null,0===I&&r('"="')),null!==t?(n=h(),null===n&&(n=d()),null!==n?t=[t,n]:(t=null,C=i)):(t=null,C=i),null!==t&&(t=function(t,e){return e}(0,t[1])),null===t&&(C=o),t}function h(){var t,e,n;if(n=C,null!==(e=p()))for(t=[];null!==e;)t.push(e),e=p();else t=null;return null!==t&&(t=function(t,e){return e.join("")}(0,t)),null===t&&(C=n),t}function p(){var t;return 33===e.charCodeAt(C)?(t="!",C++):(t=null,0===I&&r('"!"')),null===t&&(35===e.charCodeAt(C)?(t="#",C++):(t=null,0===I&&r('"#"')),null===t&&(36===e.charCodeAt(C)?(t="$",C++):(t=null,0===I&&r('"$"')),null===t&&(37===e.charCodeAt(C)?(t="%",C++):(t=null,0===I&&r('"%"')),null===t&&(38===e.charCodeAt(C)?(t="&",C++):(t=null,0===I&&r('"&"')),null===t&&(39===e.charCodeAt(C)?(t="'",C++):(t=null,0===I&&r('"\'"')),null===t&&(40===e.charCodeAt(C)?(t="(",C++):(t=null,0===I&&r('"("')),null===t&&(41===e.charCodeAt(C)?(t=")",C++):(t=null,0===I&&r('")"')),null===t&&(42===e.charCodeAt(C)?(t="*",C++):(t=null,0===I&&r('"*"')),null===t&&(43===e.charCodeAt(C)?(t="+",C++):(t=null,0===I&&r('"+"')),null===t&&(45===e.charCodeAt(C)?(t="-",C++):(t=null,0===I&&r('"-"')),null===t&&(46===e.charCodeAt(C)?(t=".",C++):(t=null,0===I&&r('"."')),null===t&&(124===e.charCodeAt(C)?(t="|",C++):(t=null,0===I&&r('"|"')),null===t&&null===(t=_())&&(58===e.charCodeAt(C)?(t=":",C++):(t=null,0===I&&r('":"')),null===t&&(60===e.charCodeAt(C)?(t="<",C++):(t=null,0===I&&r('"<"')),null===t&&(61===e.charCodeAt(C)?(t="=",C++):(t=null,0===I&&r('"="')),null===t&&(62===e.charCodeAt(C)?(t=">",C++):(t=null,0===I&&r('">"')),null===t&&(63===e.charCodeAt(C)?(t="?",C++):(t=null,0===I&&r('"?"')),null===t&&(64===e.charCodeAt(C)?(t="@",C++):(t=null,0===I&&r('"@"')),null===t&&null===(t=b())&&(91===e.charCodeAt(C)?(t="[",C++):(t=null,0===I&&r('"["')),null===t&&(93===e.charCodeAt(C)?(t="]",C++):(t=null,0===I&&r('"]"')),null===t&&(94===e.charCodeAt(C)?(t="^",C++):(t=null,0===I&&r('"^"')),null===t&&(95===e.charCodeAt(C)?(t="_",C++):(t=null,0===I&&r('"_"')),null===t&&(96===e.charCodeAt(C)?(t="`",C++):(t=null,0===I&&r('"`"')),null===t&&(123===e.charCodeAt(C)?(t="{",C++):(t=null,0===I&&r('"{"')),null===t&&(/^[\/\/]/.test(e.charAt(C))?(t=e.charAt(C),C++):(t=null,0===I&&r("[\\/\\/]")),null===t&&(125===e.charCodeAt(C)?(t="}",C++):(t=null,0===I&&r('"}"')),null===t&&(126===e.charCodeAt(C)?(t="~",C++):(t=null,0===I&&r('"~"'))))))))))))))))))))))))))))),t}function f(){var t,e;for(t=[],e=x();null!==e;)t.push(e),e=x();return t}function d(){var t,e,n,r,o;return r=C,o=C,t=w(),null!==t?(e=m(),null!==e?(n=w(),null!==n?t=[t,e,n]:(t=null,C=o)):(t=null,C=o)):(t=null,C=o),null!==t&&(t=function(t,e){return e}(0,t[1])),null===t&&(C=r),t}function m(){var t,e,n;for(n=C,t=[],e=E(),null===e&&(e=$());null!==e;)t.push(e),null===(e=E())&&(e=$());return null!==t&&(t=function(t,e){return e.join("")}(0,t)),null===t&&(C=n),t}function v(){var t;return/^[\0-]/.test(e.charAt(C))?(t=e.charAt(C),C++):(t=null,0===I&&r("[\\0-]")),t}function y(){var t;return/^[A-Z]/.test(e.charAt(C))?(t=e.charAt(C),C++):(t=null,0===I&&r("[A-Z]")),t}function g(){var t;return/^[a-z]/.test(e.charAt(C))?(t=e.charAt(C),C++):(t=null,0===I&&r("[a-z]")),t}function b(){var t;return t=y(),null===t&&(t=g()),t}function _(){var t;return/^[0-9]/.test(e.charAt(C))?(t=e.charAt(C),C++):(t=null,0===I&&r("[0-9]")),t}function x(){var t;return/^[ ]/.test(e.charAt(C))?(t=e.charAt(C),C++):(t=null,0===I&&r("[ ]")),t}function w(){var t;return/^["]/.test(e.charAt(C))?(t=e.charAt(C),C++):(t=null,0===I&&r('["]')),t}function E(){var t;return/^[^"]/.test(e.charAt(C))?(t=e.charAt(C),C++):(t=null,0===I&&r('[^"]')),t}function $(){var t,n,o;return o=C,/^[\\]/.test(e.charAt(C))?(t=e.charAt(C),C++):(t=null,0===I&&r("[\\\\]")),null!==t?(n=v(),null!==n?t=[t,n]:(t=null,C=o)):(t=null,C=o),t}var M={start:o,LinkValue:i,LinkParams:a,URIReference:s,LinkParam:u,LinkParamName:c,LinkParamValue:l,PToken:h,PTokenChar:p,OptionalSP:f,QuotedString:d,QuotedStringInternal:m,Char:v,UpAlpha:y,LoAlpha:g,Alpha:b,Digit:_,SP:x,DQ:w,QDText:E,QuotedPair:$};if(void 0!==n){if(void 0===M[n])throw new Error("Invalid rule name: "+t(n)+".")}else n="start";var C=0,I=0,j=0,L=[],P=M[n]();if(null===P||C!==e.length){var A=Math.max(C,j),O=A<e.length?e.charAt(A):null,k=function(){for(var t=1,n=1,r=!1,o=0;o<Math.max(C,j);o++){var i=e.charAt(o);"\n"===i?(r||t++,n=1,r=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(t++,n=1,r=!0):(n++,r=!1)}return{line:t,column:n}}();throw new this.SyntaxError(function(t){t.sort();for(var e=null,n=[],r=0;r<t.length;r++)t[r]!==e&&(n.push(t[r]),e=t[r]);return n}(L),O,A,k.line,k.column)}return P},toSource:function(){return this._source}};return e.SyntaxError=function(e,n,r,o,i){this.name="SyntaxError",this.expected=e,this.found=n,this.message=function(e,n){var r,o;switch(e.length){case 0:r="end of input";break;case 1:r=e[0];break;default:r=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return o=n?t(n):"end of input","Expected "+r+" but "+o+" found."}(e,n),this.offset=r,this.line=o,this.column=i},e.SyntaxError.prototype=Error.prototype,e}()},function(t,e,n){"use strict";function r(t){if(/([^\u0000-\u00ff])/.test(t))throw new Error("Can't base64 encode non-ASCII characters.");for(var e,n,r,o=0,a=[];o<t.length;){switch(e=t.charCodeAt(o),r=o%3){case 0:a.push(i.charAt(e>>2));break;case 1:a.push(i.charAt((3&n)<<4|e>>4));break;case 2:a.push(i.charAt((15&n)<<2|e>>6)),a.push(i.charAt(63&e))}n=e,o+=1}return 0===r?(a.push(i.charAt((3&n)<<4)),a.push("==")):1===r&&(a.push(i.charAt((15&n)<<2)),a.push("=")),a.join("")}function o(t){if(t=t.replace(/\s/g,""),!/^[a-z0-9\+\/\s]+\={0,2}$/i.test(t)||t.length%4>0)throw new Error("Not a base64-encoded string.");var e,n,r=0,o=[];for(t=t.replace(/\=/g,"");r<t.length;){switch(e=i.indexOf(t.charAt(r)),r%4){case 1:o.push(String.fromCharCode(n<<2|e>>4));break;case 2:o.push(String.fromCharCode((15&n)<<4|e>>2));break;case 3:o.push(String.fromCharCode((3&n)<<6|e))}n=e,r+=1}return o.join("")}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.exports={encode:r,decode:o}},function(t,e,n){"use strict";/*
 * Copyright 2013-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
t.exports={findProperties:function t(e,n,r){"object"==typeof e&&null!==e&&(n in e&&r(e[n],e,n),Object.keys(e).forEach(function(o){t(e[o],n,r)}))}}},function(t,e,n){"use strict";function r(t){var e,n,r,i;return e=!1,r=new Promise(function(t,e){n={resolve:t,reject:e}}),i=r.then,r.then=function(){return e||(e=!0,o(t).then(n.resolve,n.reject)),i.apply(r,arguments)},r}/*
 * Copyright 2013-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
var o=n(17);t.exports=r},function(t,e,n){"use strict";function r(t,e){if("string"!=typeof t)throw new Error("String required for URL encoding");return t.split("").map(function(t){if(e.hasOwnProperty(t))return t;var n=t.charCodeAt(0);if(n<=127){var r=n.toString(16).toUpperCase();return"%"+(r.length%2==1?"0":"")+r}return encodeURIComponent(t).toUpperCase()}).join("")}function o(t){return t=t||a.unreserved,function(e){return r(e,t)}}function i(t){return decodeURIComponent(t)}/*
 * Copyright 2015-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
var a;a=function(){var t={alpha:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",digit:"0123456789"};return t.genDelims=":/?#[]@",t.subDelims="!$&'()*+,;=",t.reserved=t.genDelims+t.subDelims,t.unreserved=t.alpha+t.digit+"-._~",t.url=t.reserved+t.unreserved,t.scheme=t.alpha+t.digit+"+-.",t.userinfo=t.unreserved+t.subDelims+":",t.host=t.unreserved+t.subDelims,t.port=t.digit,t.pchar=t.unreserved+t.subDelims+":@",t.segment=t.pchar,t.path=t.segment+"/",t.query=t.pchar+"/?",t.fragment=t.pchar+"/?",Object.keys(t).reduce(function(e,n){return e[n]=t[n].split("").reduce(function(t,e){return t[e]=!0,t},{}),e},{})}(),t.exports={decode:i,encode:o(),encodeURL:o(a.url),encodeScheme:o(a.scheme),encodeUserInfo:o(a.userinfo),encodeHost:o(a.host),encodePort:o(a.port),encodePathSegment:o(a.segment),encodePath:o(a.path),encodeQuery:o(a.query),encodeFragment:o(a.fragment)}},function(t,e,n){"use strict";function r(t,e,n){return e.split(",").reduce(function(e,r){var o,i;if(o={},"*"===r.slice(-1)&&(r=r.slice(0,-1),o.explode=!0),u.test(r)){var s=u.exec(r);r=s[1],o.maxLength=parseInt(s[2])}return r=a.decode(r),void 0===(i=n[r])||null===i?e:(Array.isArray(i)?e=i.reduce(function(e,n){return e.length?(e+=o.explode?t.separator:",",t.named&&o.explode&&(e+=t.encoder(r),e+=n.length?"=":t.empty)):(e+=t.first,t.named&&(e+=t.encoder(r),e+=n.length?"=":t.empty)),e+=t.encoder(n)},e):"object"==typeof i?e=Object.keys(i).reduce(function(e,n){return e.length?e+=o.explode?t.separator:",":(e+=t.first,t.named&&!o.explode&&(e+=t.encoder(r),e+=i[n].length?"=":t.empty)),e+=t.encoder(n),e+=o.explode?"=":",",e+=t.encoder(i[n])},e):(i=String(i),o.maxLength&&(i=i.slice(0,o.maxLength)),e+=e.length?t.separator:t.first,t.named&&(e+=t.encoder(r),e+=i.length?"=":t.empty),e+=t.encoder(i)),e)},"")}function o(t,e){var n;if(n=s[t.slice(0,1)],n?t=t.slice(1):n=s[""],n.reserved)throw new Error("Reserved expression operations are not supported");return r(n,t,e)}function i(t,e){var n,r,i;for(i="",r=0;;){if(-1===(n=t.indexOf("{",r))){i+=t.slice(r);break}i+=t.slice(r,n),r=t.indexOf("}",n)+1,i+=o(t.slice(n+1,r-1),e)}return i}/*
 * Copyright 2015-2016 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */
var a,s,u;a=n(81),u=/^([^:]*):([0-9]+)$/,s={"":{first:"",separator:",",named:!1,empty:"",encoder:a.encode},"+":{first:"",separator:",",named:!1,empty:"",encoder:a.encodeURL},"#":{first:"#",separator:",",named:!1,empty:"",encoder:a.encodeURL},".":{first:".",separator:".",named:!1,empty:"",encoder:a.encode},"/":{first:"/",separator:"/",named:!1,empty:"",encoder:a.encode},";":{first:";",separator:";",named:!0,empty:"",encoder:a.encode},"?":{first:"?",separator:"&",named:!0,empty:"=",encoder:a.encode},"&":{first:"&",separator:"&",named:!0,empty:"=",encoder:a.encode},"=":{reserved:!0},",":{reserved:!0},"!":{reserved:!0},"@":{reserved:!0},"|":{reserved:!0}},t.exports={expand:i}},function(t,e,n){"use strict";var r=n(86);window.Suggestions=t.exports=r},function(t,e){function n(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var o in n)r.call(n,o)&&(t[o]=n[o])}return t}t.exports=n;var r=Object.prototype.hasOwnProperty},function(t,e){"Use strict";var n=function(t){return this.component=t,this.items=[],this.active=0,this.element=document.createElement("ul"),this.element.className="suggestions",this.selectingListItem=!1,t.el.parentNode.insertBefore(this.element,t.el.nextSibling),this};n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(t){this.items.push(t)},n.prototype.clear=function(){this.items=[],this.active=0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.draw=function(){if(this.element.innerHTML="",0===this.items.length)return void this.hide();for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()},n.prototype.drawItem=function(t,e){var n=document.createElement("li"),r=document.createElement("a");e&&(n.className+=" active"),r.innerHTML=t.string,n.appendChild(r),this.element.appendChild(n),n.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),n.addEventListener("mouseup",function(){this.handleMouseUp.call(this,t)}.bind(this))},n.prototype.handleMouseUp=function(t){this.selectingListItem=!1,this.component.value(t.original),this.clear(),this.draw()},n.prototype.move=function(t){this.active=t,this.draw()},n.prototype.previous=function(){this.move(0===this.active?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)},t.exports=n},function(t,e,n){"use strict";var r=n(84),o=n(56),i=n(85),a=function(t,e,n){return n=n||{},this.options=r({minLength:2,limit:5,filter:!0},n),this.el=t,this.data=e||[],this.list=new i(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(t){this.handleKeyUp(t.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(t){this.handleKeyDown(t)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(t){this.handlePaste(t)}.bind(this)),this};a.prototype.handleKeyUp=function(t){40!==t&&38!==t&&27!==t&&13!==t&&9!==t&&this.handleInputChange(this.el.value)},a.prototype.handleKeyDown=function(t){switch(t.keyCode){case 13:case 9:t.preventDefault(),this.list.isEmpty()||(this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},a.prototype.handleBlur=function(){this.list.selectingListItem||this.list.hide()},a.prototype.handlePaste=function(t){if(t.clipboardData)this.handleInputChange(t.clipboardData.getData("Text"));else{var e=this;setTimeout(function(){e.handleInputChange(t.target.value)},100)}},a.prototype.handleInputChange=function(t){if(this.query=this.normalize(t),this.list.clear(),this.query.length<this.options.minLength)return void this.list.draw();this.getCandidates(function(t){for(var e=0;e<t.length&&(this.list.add(t[e]),e!==this.options.limit-1);e++);this.list.draw()}.bind(this))},a.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},a.prototype.update=function(t){this.data=t,this.handleKeyUp()},a.prototype.clear=function(){this.data=[],this.list.clear()},a.prototype.normalize=function(t){return t=t.toLowerCase()},a.prototype.match=function(t,e){return t.indexOf(e)>-1},a.prototype.value=function(t){if(this.selected=t,this.el.value=this.getItemValue(t),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")},a.prototype.getCandidates=function(t){var e={pre:"<strong>",post:"</strong>",extract:function(t){return this.getItemValue(t)}.bind(this)};t(this.options.filter?o.filter(this.query,this.data,e):this.data.map(function(t){for(var e=this.getItemValue(t),n=this.normalize(e),r=n.lastIndexOf(this.query);r>-1;){var o=r+this.query.length;e=e.slice(0,r)+"<strong>"+e.slice(r,o)+"</strong>"+e.slice(o),r=n.slice(0,r).lastIndexOf(this.query)}return{original:t,string:e}}.bind(this)))},a.prototype.getItemValue=function(t){return t},t.exports=a},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c;return t._t("marker")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{ref:"container",attrs:{id:t.container}},[t._t("default")],2)}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticStyle:{display:"none"}},[t._t("default")],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c;return t._t("default")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function o(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,o,s,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(n=this._events[t],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),c=n.slice(),o=c.length,u=0;u<o;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(t,e){var o;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(o=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),o||(o=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var o=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,o,a,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],a=n.length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){o=s;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function i(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function a(){m&&f&&(m=!1,f.length?d=f.concat(d):v=-1,d.length&&s())}function s(){if(!m){var t=o(a);m=!0;for(var e=d.length;e;){for(f=d,d=[];++v<e;)f&&f[v].run();v=-1,e=d.length}f=null,m=!1,i(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,h,p=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var f,d=[],m=!1,v=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||m||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e,n){(function(t,r){var o;!function(i){function a(t){throw new RangeError(O[t])}function s(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function u(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(A,"."),r+s(t.split("."),e).join(".")}function c(t){for(var e,n,r=[],o=0,i=t.length;o<i;)e=t.charCodeAt(o++),e>=55296&&e<=56319&&o<i?(n=t.charCodeAt(o++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--)):r.push(e);return r}function l(t){return s(t,function(t){var e="";return t>65535&&(t-=65536,e+=T(t>>>10&1023|55296),t=56320|1023&t),e+=T(t)}).join("")}function h(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:x}function p(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function f(t,e,n){var r=0;for(t=n?S(t/M):t>>1,t+=S(t/e);t>k*E>>1;r+=x)t=S(t/k);return S(r+(k+1)*t/(t+$))}function d(t){var e,n,r,o,i,s,u,c,p,d,m=[],v=t.length,y=0,g=I,b=C;for(n=t.lastIndexOf(j),n<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&a("not-basic"),m.push(t.charCodeAt(r));for(o=n>0?n+1:0;o<v;){for(i=y,s=1,u=x;o>=v&&a("invalid-input"),c=h(t.charCodeAt(o++)),(c>=x||c>S((_-y)/s))&&a("overflow"),y+=c*s,p=u<=b?w:u>=b+E?E:u-b,!(c<p);u+=x)d=x-p,s>S(_/d)&&a("overflow"),s*=d;e=m.length+1,b=f(y-i,e,0==i),S(y/e)>_-g&&a("overflow"),g+=S(y/e),y%=e,m.splice(y++,0,g)}return l(m)}function m(t){var e,n,r,o,i,s,u,l,h,d,m,v,y,g,b,$=[];for(t=c(t),v=t.length,e=I,n=0,i=C,s=0;s<v;++s)(m=t[s])<128&&$.push(T(m));for(r=o=$.length,o&&$.push(j);r<v;){for(u=_,s=0;s<v;++s)(m=t[s])>=e&&m<u&&(u=m);for(y=r+1,u-e>S((_-n)/y)&&a("overflow"),n+=(u-e)*y,e=u,s=0;s<v;++s)if(m=t[s],m<e&&++n>_&&a("overflow"),m==e){for(l=n,h=x;d=h<=i?w:h>=i+E?E:h-i,!(l<d);h+=x)b=l-d,g=x-d,$.push(T(p(d+b%g,0))),l=S(b/g);$.push(T(p(l,0))),i=f(n,y,r==o),n=0,++r}++n,++e}return $.join("")}function v(t){return u(t,function(t){return L.test(t)?d(t.slice(4).toLowerCase()):t})}function y(t){return u(t,function(t){return P.test(t)?"xn--"+m(t):t})}var g=("object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType,"object"==typeof r&&r);var b,_=2147483647,x=36,w=1,E=26,$=38,M=700,C=72,I=128,j="-",L=/^xn--/,P=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=x-w,S=Math.floor,T=String.fromCharCode;b={version:"1.4.1",ucs2:{decode:c,encode:l},decode:d,encode:m,toASCII:y,toUnicode:v},void 0!==(o=function(){return b}.call(e,n,e,t))&&(t.exports=o)}()}).call(e,n(19)(t),n(10))},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,i){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var h,p,f,d,m=t[l].replace(s,"%20"),v=m.indexOf(n);v>=0?(h=m.substr(0,v),p=m.substr(v+1)):(h=m,p=""),f=decodeURIComponent(h),d=decodeURIComponent(p),r(a,f)?o(a[f])?a[f].push(d):a[f]=[a[f],d]:a[f]=d}return a};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";function r(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var o=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,s){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?r(a(t),function(a){var s=encodeURIComponent(o(a))+n;return i(t[a])?r(t[a],function(t){return s+encodeURIComponent(o(t))}).join(e):s+encodeURIComponent(o(t[a]))}).join(e):s?encodeURIComponent(o(s))+n+encodeURIComponent(o(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,e,n){if(t&&c.isObject(t)&&t instanceof r)return t;var o=new r;return o.parse(t,e,n),o}function i(t){return c.isString(t)&&(t=o(t)),t instanceof r?t.format():r.prototype.format.call(t)}function a(t,e){return o(t,!1,!0).resolve(e)}function s(t,e){return t?o(t,!1,!0).resolveObject(e):e}var u=n(103),c=n(107);e.parse=o,e.resolve=a,e.resolveObject=s,e.format=i,e.Url=r;var l=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(f),m=["'"].concat(d),v=["%","/","?",";","#"].concat(m),y=["/","?","#"],g=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},E=n(20);r.prototype.parse=function(t,e,n){if(!c.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),o=-1!==r&&r<t.indexOf("#")?"?":"#",i=t.split(o),a=/\\/g;i[0]=i[0].replace(a,"/"),t=i.join(o);var s=t;if(s=s.trim(),!n&&1===t.split("#").length){var h=p.exec(s);if(h)return this.path=s,this.href=s,this.pathname=h[1],h[2]?(this.search=h[2],this.query=e?E.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var f=l.exec(s);if(f){f=f[0];var d=f.toLowerCase();this.protocol=d,s=s.substr(f.length)}if(n||f||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var $="//"===s.substr(0,2);!$||f&&x[f]||(s=s.substr(2),this.slashes=!0)}if(!x[f]&&($||f&&!w[f])){for(var M=-1,C=0;C<y.length;C++){var I=s.indexOf(y[C]);-1!==I&&(-1===M||I<M)&&(M=I)}var j,L;L=-1===M?s.lastIndexOf("@"):s.lastIndexOf("@",M),-1!==L&&(j=s.slice(0,L),s=s.slice(L+1),this.auth=decodeURIComponent(j)),M=-1;for(var C=0;C<v.length;C++){var I=s.indexOf(v[C]);-1!==I&&(-1===M||I<M)&&(M=I)}-1===M&&(M=s.length),this.host=s.slice(0,M),s=s.slice(M),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var A=this.hostname.split(/\./),C=0,O=A.length;C<O;C++){var k=A[C];if(k&&!k.match(g)){for(var S="",T=0,z=k.length;T<z;T++)k.charCodeAt(T)>127?S+="x":S+=k[T];if(!S.match(g)){var F=A.slice(0,C),R=A.slice(C+1),q=k.match(b);q&&(F.push(q[1]),R.unshift(q[2])),R.length&&(s="/"+R.join(".")+s),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=u.toASCII(this.hostname));var B=this.port?":"+this.port:"",D=this.hostname||"";this.host=D+B,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!_[d])for(var C=0,O=m.length;C<O;C++){var U=m[C];if(-1!==s.indexOf(U)){var N=encodeURIComponent(U);N===U&&(N=escape(U)),s=s.split(U).join(N)}}var Z=s.indexOf("#");-1!==Z&&(this.hash=s.substr(Z),s=s.slice(0,Z));var V=s.indexOf("?");if(-1!==V?(this.search=s.substr(V),this.query=s.substr(V+1),e&&(this.query=E.parse(this.query)),s=s.slice(0,V)):e&&(this.search="",this.query={}),s&&(this.pathname=s),w[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",G=this.search||"";this.path=B+G}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(i=E.stringify(this.query));var a=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||w[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+o+n+a+r},r.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(c.isString(t)){var e=new r;e.parse(t,!1,!0),t=e}for(var n=new r,o=Object.keys(this),i=0;i<o.length;i++){var a=o[i];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),u=0;u<s.length;u++){var l=s[u];"protocol"!==l&&(n[l]=t[l])}return w[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!w[t.protocol]){for(var h=Object.keys(t),p=0;p<h.length;p++){var f=h[p];n[f]=t[f]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||x[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var m=n.pathname||"",v=n.search||"";n.path=m+v}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),g=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=g||y||n.host&&t.pathname,_=b,E=n.pathname&&n.pathname.split("/")||[],d=t.pathname&&t.pathname.split("/")||[],$=n.protocol&&!w[n.protocol];if($&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),b=b&&(""===d[0]||""===E[0])),g)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,E=d;else if(d.length)E||(E=[]),E.pop(),E=E.concat(d),n.search=t.search,n.query=t.query;else if(!c.isNullOrUndefined(t.search)){if($){n.hostname=n.host=E.shift();var M=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");M&&(n.auth=M.shift(),n.host=n.hostname=M.shift())}return n.search=t.search,n.query=t.query,c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var C=E.slice(-1)[0],I=(n.host||t.host||E.length>1)&&("."===C||".."===C)||""===C,j=0,L=E.length;L>=0;L--)C=E[L],"."===C?E.splice(L,1):".."===C?(E.splice(L,1),j++):j&&(E.splice(L,1),j--);if(!b&&!_)for(;j--;j)E.unshift("..");!b||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),I&&"/"!==E.join("/").substr(-1)&&E.push("");var P=""===E[0]||E[0]&&"/"===E[0].charAt(0);if($){n.hostname=n.host=P?"":E.length?E.shift():"";var M=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");M&&(n.auth=M.shift(),n.host=n.hostname=M.shift())}return b=b||n.host&&E.length,b&&!P&&E.unshift(""),E.length?n.pathname=E.join("/"):(n.pathname=null,n.path=null),c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=h.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}}])});